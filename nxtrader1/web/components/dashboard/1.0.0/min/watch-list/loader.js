var __awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(r,n){function o(t){try{l(a.next(t))}catch(t){n(t)}}function s(t){try{l(a.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,s)}l((a=a.apply(t,e||[])).next())}))};define("dashboard/flamingo-api/indexdb/indexDbService",["require","exports"],(function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const e="neo-flamingo-offline-storage";let i=!1;const a=[];let r;t.default={getObjectStore:function(t){const e=r.transaction(t,"readwrite");return e.oncomplete=function(){},e.objectStore(t)},isOfflineStorageEnabled:function(){return i},bootstrapOfflineStorage:function(t,n){return __awaiter(this,void 0,void 0,(function*(){if(i=t,!i)throw"[Offline Storage] Feature switch not enabled";try{const{openDbHandle:t}=yield new Promise(((t,i)=>{const r=self.indexedDB.open(e,1);let n=!1;r.onsuccess=function(){t({dbUpgradeNeeded:n,openDbHandle:this.result})},r.onerror=function(t){console.error("[Offline Storage] Could not open database",t),i(t)},r.onupgradeneeded=function(){a.forEach((t=>{t(this.result)})),n=!0}}));r=t,yield n()}catch(t){i=!1;const e="[Offline Storage] Feature was enabled but failed to initialize databases";throw console.error(e,t),e}}))},registerOnUpgradeNeededListener:function(t){a.push(t)}}})),define("dashboard/flamingo-api/indexdb/indexDbErrorHandling",["require","exports"],(function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractErrorAsString=void 0,t.extractErrorAsString=function(t,e){try{return t+`. ${e.target.error}`}catch(e){return t+". Error converting indexdb error event to string"}}}));__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(r,n){function o(t){try{l(a.next(t))}catch(t){n(t)}}function s(t){try{l(a.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,s)}l((a=a.apply(t,e||[])).next())}))};define("dashboard/flamingo-api/indexdb/transactionsDbService",["require","exports","./indexDbService","./indexDbErrorHandling"],(function(require,t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a="watchlist";let r=2;e.default.registerOnUpgradeNeededListener((t=>function(t){console.log("transactionsDbService > onUpgradeNeeded");let e;t.objectStoreNames.contains(a)||(e=t.createObjectStore(a,{keyPath:"id"}),e.createIndex("idIndex","id",{unique:!0,multiEntry:!1}),e.createIndex("symbolIndex","symbol",{unique:!1,multiEntry:!1}))}(t))),t.default={setGeneratedArtifactVersion:function(t){r=t},storeTransaction:function(t,n,o){return __awaiter(this,void 0,void 0,(function*(){yield function(t,n,o){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((s,l)=>{let c={block_time:t.block_time,id:t.id,size:t.size,txid:t.txid,value:t.value,net_fee:t.net_fee,asset_id:t.asset_id,symbol:t.symbol,from:t.from,to:t.to,type:t.type,purchaseCostUsdt:n,goalUsdt:o,recordVersion:r,createdOn:(new Date).toISOString()};const d=e.default.getObjectStore(a).put(c);c=null,d.onsuccess=function(){s()},d.onerror=function(e){l((0,i.extractErrorAsString)(`addTransactionToDb indexdb error id=${t.id}`,e))}}))}))}(t,n,o)}))},getTransactions:function(t){return __awaiter(this,void 0,void 0,(function*(){return yield function(t){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{const o=e.default.getObjectStore(a).index("symbolIndex").getAll(t);o.onsuccess=function(t){if(void 0===t.target.result)return void n();const e=t.target.result;r(e)},o.onerror=function(t){n((0,i.extractErrorAsString)("getTransactionsFromDb indexdb error",t))}}))}))}(t)}))},getAllTransactions:function(){return __awaiter(this,void 0,void 0,(function*(){return yield function(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const n=e.default.getObjectStore(a).getAll();n.onsuccess=function(e){if(void 0===e.target.result)return void r();const i=e.target.result;t(i)},n.onerror=function(t){r((0,i.extractErrorAsString)("getTransactionsFromDb indexdb error",t))}}))}))}()}))},deleteById:function(t){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((i,r)=>{const n=e.default.getObjectStore(a),o=n.index("idIndex").openKeyCursor(t);o.onsuccess=function(){const t=o.result;t?(n.delete(t.primaryKey),t.continue()):i()},o.onerror=function(t){r(t.target.errorCode)}}))}))}}}));__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(r,n){function o(t){try{l(a.next(t))}catch(t){n(t)}}function s(t){try{l(a.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,s)}l((a=a.apply(t,e||[])).next())}))};define("dashboard/flamingo-api/api/api-client",["require","exports","axios"],(function(require,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.api=e.default.create({baseURL:"https://neo-api.b-cdn.net"})}getWalletWalletHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/wallet/history",{neo_address:t,page:e})}))}getWalletWalletLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/wallet/latest",{neo_address:t})}))}getWalletClaimsHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/claims/history",{neo_address:t,page:e})}))}getWalletClaimsLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/claims/latest",{neo_address:t})}))}getWalletTradeHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/trade/history",{neo_address:t,page:e})}))}getWalletTradeLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/trade/latest",{neo_address:t})}))}getWalletLpHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lp/history",{neo_address:t,page:e})}))}getWalletLpLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lp/latest",{neo_address:t})}))}getWalletStakingHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/staking/history",{neo_address:t,page:e})}))}getWalletStakingLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/staking/latest",{neo_address:t})}))}getWalletLendHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lend/history",{neo_address:t,page:e})}))}getWalletLendLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lend/latest",{neo_address:t})}))}getWalletTransferHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/transfer/history",{neo_address:t,page:e})}))}getWalletTransferLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/transfer/latest",{neo_address:t})}))}getFlamingoLivedataPricesLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/prices/latest",{})}))}getFlamingoLivedataPricesFromblock(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-block/${t}`,{})}))}getFlamingoLivedataPricesFromdatetime({year:t,month:e,day:i,hour:a,minute:r}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-datetime/${t}/${e}/${i}/${a}/${r}`,{})}))}getFlamingoLivedataPricesFromtimestamp(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-timestamp/${t}`,{})}))}getFlamingoLivedataFiatexchangerate(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/fiat-exchange-rate/${t}`,{})}))}getFlamingoLivedataClaimsHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/claims/history",{page:t})}))}getFlamingoLivedataClaimsLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/claims/latest",{})}))}getFlamingoLivedataTradeHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/trade/history",{page:t})}))}getFlamingoLivedataTradeLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/trade/latest",{})}))}getFlamingoLivedataLpHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lp/history",{page:t})}))}getFlamingoLivedataLpLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lp/latest",{})}))}getFlamingoLivedataStakingHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/staking/history",{page:t})}))}getFlamingoLivedataStakingLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/staking/latest",{})}))}getFlamingoLivedataLendHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lend/history",{page:t})}))}getFlamingoLivedataLendLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lend/latest",{})}))}getFlamingoLivedataTransferHistory(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/transfer/history",{page:t})}))}getFlamingoLivedataTransferLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/transfer/latest",{})}))}getFlamingoAnalyticsMonthhistory(t,{year:e,month:i}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/month-history/${t}`,{year:e,month:i})}))}getFlamingoAnalyticsMonthlatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/month-latest/${t}`,{})}))}getFlamingoAnalyticsDailyhistory(t,{year:e,month:i,day:a}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/daily-history/${t}`,{year:e,month:i,day:a})}))}getFlamingoAnalyticsDailylatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/daily-latest/${t}`,{})}))}getFlamingoAnalyticsRolling30days(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/rolling-30-days/${t}`,{})}))}getFlamingoAnalyticsFlamingoTotalsupply(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/analytics/flamingo/total-supply",{})}))}getFlamingoAnalyticsFlamingoUsdvaluelocked(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/analytics/flamingo/usd-value-locked",{})}))}getNeoBlock(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/block",{index:t,flamingo_data:e})}))}getNeoBlockLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/block/latest",{flamingo_data:t})}))}getNeoBlocksHistory(t,e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/blocks/history",{page:t,flamingo_data:e})}))}getNeoBlocksLatest(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/blocks/latest",{flamingo_data:t})}))}getNeoTransaction(t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/transaction",{tx_hash:t})}))}fetchData(t,e={}){return __awaiter(this,void 0,void 0,(function*(){try{return(yield this.api.get(t,{params:e})).data}catch(e){throw console.error("Error fetching data from URL:",t,e),e}}))}}}));__awaiter=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(r,n){function o(t){try{l(a.next(t))}catch(t){n(t)}}function s(t){try{l(a.throw(t))}catch(t){n(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,s)}l((a=a.apply(t,e||[])).next())}))};define("dashboard/price-list/price-list",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","preact/hooks","@preact/signals","ojs/ojconverter-number","ojs/ojarraydataprovider","dashboard/flamingo-api/api/api-client","css!dashboard/price-list/price-list-styles.css","ojs/ojlistview","ojs/ojlistitemlayout"],(function(require,t,e,i,a,r,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startPriceRefreshTimer=t.isAutoPriceRefreshRunning=t.stopPriceRefreshTimer=t.PriceList=t.prices=void 0;t.prices=(0,r.signal)([]);let l=(0,r.signal)(0);const c=new s.default;function d(){(function(){return __awaiter(this,void 0,void 0,(function*(){return c.getFlamingoLivedataPricesLatest()}))})().then((e=>{console.log("price-list > refreshPrices > completed",e),t.prices.value=e}))}function u(){0!==l.value&&(console.log("price-list > stop refresh timer"),clearInterval(l.value),l.value=0)}function f(){0===l.value&&(console.log("price-list > start refresh timer"),l.value=setInterval(d,3e5))}t.PriceList=(0,i.registerCustomElement)("dashboard-price-list",(function({pricesToShow:i}){const r=t.prices.value.filter((function(t){return!!i&&i.indexOf(t.symbol)>=0})),s=new o(null!=r?r:[],{keyAttributes:"symbol"}),l=new n.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12});return(0,a.useEffect)((()=>(d(),f(),()=>u())),[]),(0,e.jsx)("div",{children:(0,e.jsx)("oj-list-view",Object.assign({id:"lvPrices","aria-label":"flamingo price list",data:s,class:"oj-listview-item-padding-off","selection-mode":"none"},{children:(0,e.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:t=>(0,e.jsx)("div",{children:(0,e.jsxs)("div",Object.assign({className:"oj-flex oj-sm-padding-2x"},{children:[(0,e.jsx)("img",{src:`styles/images/${t.item.data.symbol}.svg`,class:"token"}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",Object.assign({className:"oj-flex"},{children:[(0,e.jsx)("span",Object.assign({class:"oj-typography-body-md oj-text-color-primary"},{children:t.item.data.unwrappedSymbol})),(0,e.jsxs)("span",Object.assign({class:"oj-typography-body-sm oj-text-color-secondary oj-md-padding-2x-start oj-sm-padding-1x-top"},{children:["(",t.item.data.symbol,")"]}))]})),(0,e.jsx)("div",Object.assign({style:{fontSize:22}},{children:l.format(t.item.data.usd_price)}))]})]}))})})}))})}),"PriceList",{properties:{pricesToShow:{type:"Array<string>"}}}),t.stopPriceRefreshTimer=u,t.isAutoPriceRefreshRunning=(0,r.computed)((()=>l.value>0)),t.startPriceRefreshTimer=f})),define("dashboard/notifications-layer/notifications-layer",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","ojs/ojarraydataprovider","@preact/signals","css!dashboard/notifications-layer/notifications-layer-styles.css","ojs/ojmessages"],(function(require,t,e,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNotification=t.NotificationsLayer=void 0;const n=(0,r.signal)([]);t.NotificationsLayer=(0,i.registerCustomElement)("dashboard-notifications-layer",(function({}){const t=new a(n.value,{keyAttributes:"id"});return(0,e.jsx)("div",{children:(0,e.jsx)("oj-messages",{class:"oj-color-invert",messages:t,display:"notification",position:{my:{vertical:"top",horizontal:"end"},at:{vertical:"top",horizontal:"end"},of:"window"}})})}),"NotificationsLayer"),t.createNotification=function(t){n.value=[t]}})),define("dashboard/watch-list/watch-list-item",["require","exports","preact/jsx-runtime","dashboard/price-list/price-list","ojs/ojconverter-number","dashboard/notifications-layer/notifications-layer","css!dashboard/watch-list/watch-list-styles.css","ojs/ojgauge"],(function(require,t,e,i,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchListItem=void 0;const n=new a.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:2}),o=new a.IntlNumberConverter({style:"decimal",minimumIntegerDigits:2,minimumFractionDigits:2,maximumFractionDigits:4,useGrouping:!1}),s=t=>({insert:`purchased ⠀(${t.componentElement.getAttribute("data-valueSymbol")}) : ${t.componentElement.getAttribute("data-value")}\n      ⠀⠀⠀⠀⠀⠀⠀⠀ (USDT) : ${t.componentElement.getAttribute("data-purchaseCostUsdt")} \n      current⠀⠀⠀ (USDT) : ${t.componentElement.getAttribute("data-curPriceInUsdt")}\n      goal⠀⠀⠀⠀⠀ (USDT) : ${t.componentElement.getAttribute("data-goalUsdt")}`});t.WatchListItem=function(t){const a=i.prices.value.find((e=>e.symbol===t.symbol)),l=a?a.usd_price:0,c=parseFloat(t.value)*l,d=t.purchaseCostUsdt,u=t.goalUsdt,f=c-d;return(0,e.jsxs)("li",Object.assign({class:"oj-md-padding-3x-top oj-md-padding-3x-bottom"},{children:[(0,e.jsxs)("div",Object.assign({class:"oj-flex oj-flex oj-text-primary-color oj-typography-body-md"},{children:[(0,e.jsx)("img",{src:`styles/images/${t.symbol}.svg`,class:" card-small-token"}),(0,e.jsx)("div",Object.assign({onClick:()=>(t=>{navigator.clipboard.writeText(t);const e={id:1,severity:"none",summary:t+" copied to clipboard",autoTimeout:3e3};(0,r.createNotification)(e)})(t.value)},{children:o.format(parseFloat(t.value))})),(0,e.jsx)("div",{class:"oj-flex-item"}),(0,e.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item oj-flex"},{children:[(0,e.jsx)("img",{src:"styles/images/fUSDT.svg",class:"oj-md-padding-2x-start card-small-token"}),(0,e.jsx)("div",{children:n.format(c)}),(0,e.jsx)("div",Object.assign({class:"oj-md-margin-2x-start "+(f>0?f>u-d?"profit-above-goal":"in-profit":"at-a-loss")},{children:n.format(f)}))]}))]})),(0,e.jsxs)("div",Object.assign({class:"oj-flex oj-md-padding-5x-start oj-md-padding-3x-top oj-md-padding-1x-bottom"},{children:[(0,e.jsx)("div",{class:"oj-flex-item"}),(0,e.jsx)("oj-status-meter-gauge",{"labelled-by":"metricLabel",min:Math.max(0,c-100),max:t.goalUsdt+50,value:c,thresholds:[{max:d,color:"red"},{max:u,color:"black"},{color:"green"}],size:"lg",referenceLines:[{value:d,color:"red"},{value:u,color:"black"}],tooltip:{renderer:s},"data-curPriceInUsdt":c,"data-purchaseCostUsdt":d,"data-goalUsdt":u,"data-value":t.value,"data-valueSymbol":t.symbol,style:{width:"290px"},plotArea:{rendered:"on"},readonly:!0}),(0,e.jsx)("div",{class:"oj-flex-item"})]}))]}))}})),define("dashboard/watch-list/watch-list",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","dashboard/flamingo-api/indexdb/transactionsDbService","@preact/signals","ojs/ojarraydataprovider","dashboard/price-list/price-list","./watch-list-item","css!dashboard/watch-list/watch-list-styles.css","ojs/ojgauge"],(function(require,t,e,i,a,r,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchList=void 0,t.WatchList=(0,i.registerCustomElement)("dashboard-watch-list",(function(){console.log("watch-list > render");const t=(0,r.useSignal)([]),i=new n(t.value,{keyAttributes:"id"});return(0,r.useSignalEffect)((()=>{o.prices.value&&o.prices.value.length>0&&setTimeout((()=>{a.default.getAllTransactions().then((e=>{t.value=e.sort(((t,e)=>t.value-e.value))}))}),1e3)})),(0,e.jsx)("div",{children:(0,e.jsx)("oj-list-view",Object.assign({id:"lvWatchlist","aria-label":"transactions",data:i,gridlines:{item:"hidden"},class:"oj-sm-padding-2x",selectionMode:"none"},{children:(0,e.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:t=>(0,s.WatchListItem)(t.data)})}))})}),"WatchList")})),define("dashboard/watch-list/loader",["require","exports","./watch-list"],(function(require,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatchList=void 0,Object.defineProperty(t,"WatchList",{enumerable:!0,get:function(){return e.WatchList}})}));
//# sourceMappingURL=loader.js.map