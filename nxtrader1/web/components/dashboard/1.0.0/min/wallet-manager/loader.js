define("dashboard/wallet-manager/asset-card",["require","exports","preact/jsx-runtime","ojs/ojconverter-number","ojs/ojcolor","ojs/ojcolor","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojbutton","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup"],(function(require,e,t,a,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetCard=void 0,e.AssetCard=function({wassetName:e,wasset:i,prices:o,onCardSelected:r}){if(0===(null==i?void 0:i.length))return(0,t.jsx)(t.Fragment,{});const l=new a.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12}),d=o.find((t=>t.symbol===e)),c=d?d.usd_price:0,u=null==i?void 0:i.reduce(((e,t)=>e+(t.balance?parseFloat(t.balance):0)),0),f=null==i?void 0:i.reduce(((e,t)=>e+(t.balance?parseFloat(t.balance)*c:0)),0);function m(t){var a=t.currentTarget,s=a.getAttribute("data-walletAddress"),n=a.getAttribute("data-assetid");r&&s&&n&&r(s,null!=e?e:"",n,a.id)}return(0,t.jsx)("oj-action-card",Object.assign({id:"acFUSD",class:"oj-bg-neutral-20 oj-md-margin-2x-end oj-md-margin-2x-bottom"},{children:(0,t.jsxs)("div",Object.assign({class:"oj-md-margin-3x card-asset"},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex"},{children:[(0,t.jsx)("img",{src:`styles/images/${e}.svg`,class:"card-token"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",Object.assign({class:"oj-text-primary-color oj-typography-subheading-xs"},{children:e})),(0,t.jsx)("div",Object.assign({class:"oj-text-primary-color oj-typography-subheading-xs"},{children:u}))]}),(0,t.jsx)("div",{class:"oj-flex-item"}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item oj-flex oj-text-secondary-color oj-typography-body-sm oj-sm-padding-4x-top"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",class:"card-small-token"}),(0,t.jsx)("span",Object.assign({class:"oj-sm-margin-2x-top"},{children:l.format(null!=f?f:0)}))]}))]})),(0,t.jsx)("div",Object.assign({class:"oj-md-margin-6x-top oj-md-margin-3x-bottom oj-md-margin-3x-start oj-md-margin-3x-end oj-flex"},{children:null==i?void 0:i.map((e=>{var a;return(0,t.jsx)("oj-button",Object.assign({chroming:"borderless",class:"card-wasset",id:`btn-${e.walletName}-${e.asset_id}`,"data-walletAddress":e.walletAddress,"data-assetId":e.asset_id,onClick:m},{children:(0,t.jsxs)("div",Object.assign({class:"oj-flex card-wasset"},{children:[(0,t.jsx)("div",{style:{width:"5px",height:"35px",backgroundColor:(e.walletColor?new n(e.walletColor):s.BLACK).toString()}}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-margin-1x-start"},{children:[(0,t.jsx)("div",Object.assign({class:"oj-text-primary-color oj-typography-body-sm"},{children:e.walletName})),(0,t.jsx)("div",Object.assign({class:"oj-text-secondary-color oj-typography-body-xs",title:e.balance},{children:parseFloat(null!==(a=e.balance)&&void 0!==a?a:"").toFixed(8)}))]}))]}))}))}))}))]}))}))}})),define("dashboard/wallet-manager/bignumber",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BigNumber=void 0;var t=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,s=Math.floor,n="[BigNumber Error] ",i=n+"Number primitive has more than 15 significant digits: ",o=1e14,r=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],c=1e7,u=1e9;function f(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,a,s=1,n=e.length,i=e[0]+"";s<n;){for(t=e[s++]+"",a=r-t.length;a--;t="0"+t);i+=t}for(n=i.length;48===i.charCodeAt(--n););return i.slice(0,n+1||1)}function g(e,t){var a,s,n=e.c,i=t.c,o=e.s,r=t.s,l=e.e,d=t.e;if(!o||!r)return null;if(a=n&&!n[0],s=i&&!i[0],a||s)return a?s?0:-r:o;if(o!=r)return o;if(a=o<0,s=l==d,!n||!i)return s?0:!n^a?1:-1;if(!s)return l>d^a?1:-1;for(r=(l=n.length)<(d=i.length)?l:d,o=0;o<r;o++)if(n[o]!=i[o])return n[o]>i[o]^a?1:-1;return l==d?0:l>d^a?1:-1}function h(e,t,a,i){if(e<t||e>a||e!==s(e))throw Error(n+(i||"Argument")+("number"==typeof e?e<t||e>a?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function v(e){var t=e.c.length-1;return f(e.e/r)==t&&e.c[t]%2!=0}function p(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function j(e,t,a){var s,n;if(t<0){for(n=a+".";++t;n+=a);e=n+e}else if(++t>(s=e.length)){for(n=a,t-=s;--t;n+=a);e+=n}else t<s&&(e=e.slice(0,t)+"."+e.slice(t));return e}e.BigNumber=function e(b){var w,y,x,_,T,A,N,O,S,E,k=$.prototype={constructor:$,toString:null,valueOf:null},C=new $(1),D=20,L=4,W=-7,F=21,P=-1e7,I=1e7,U=!1,R=1,M=0,B={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function $(e,a){var n,o,d,c,u,f,m,g,v=this;if(!(v instanceof $))return new $(e,a);if(null==a){if(e&&!0===e._isBigNumber)return v.s=e.s,void(!e.c||e.e>I?v.c=v.e=null:e.e<P?v.c=[v.e=0]:(v.e=e.e,v.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(v.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,u=e;u>=10;u/=10,c++);return void(c>I?v.c=v.e=null:(v.e=c,v.c=[e]))}g=String(e)}else{if(!t.test(g=String(e)))return x(v,g,f);v.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(u=g.search(/e/i))>0?(c<0&&(c=u),c+=+g.slice(u+1),g=g.substring(0,u)):c<0&&(c=g.length)}else{if(h(a,2,H.length,"Base"),10==a&&G)return V(v=new $(e),D+v.e+1,L);if(g=String(e),f="number"==typeof e){if(0*e!=0)return x(v,g,f,a);if(v.s=1/e<0?(g=g.slice(1),-1):1,$.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(i+e)}else v.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(n=H.slice(0,a),c=u=0,m=g.length;u<m;u++)if(n.indexOf(o=g.charAt(u))<0){if("."==o){if(u>c){c=m;continue}}else if(!d&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){d=!0,u=-1,c=0;continue}return x(v,String(e),f,a)}f=!1,(c=(g=y(g,a,10,v.s)).indexOf("."))>-1?g=g.replace(".",""):c=g.length}for(u=0;48===g.charCodeAt(u);u++);for(m=g.length;48===g.charCodeAt(--m););if(g=g.slice(u,++m)){if(m-=u,f&&$.DEBUG&&m>15&&(e>l||e!==s(e)))throw Error(i+v.s*e);if((c=c-u-1)>I)v.c=v.e=null;else if(c<P)v.c=[v.e=0];else{if(v.e=c,v.c=[],u=(c+1)%r,c<0&&(u+=r),u<m){for(u&&v.c.push(+g.slice(0,u)),m-=r;u<m;)v.c.push(+g.slice(u,u+=r));u=r-(g=g.slice(u)).length}else u-=m;for(;u--;g+="0");v.c.push(+g)}}else v.c=[v.e=0]}function q(e,t,a,s){var n,i,o,r,l;if(null==a?a=L:h(a,0,8),!e.c)return e.toString();if(n=e.c[0],o=e.e,null==t)l=m(e.c),l=1==s||2==s&&(o<=W||o>=F)?p(l,o):j(l,o,"0");else if(i=(e=V(new $(e),t,a)).e,r=(l=m(e.c)).length,1==s||2==s&&(t<=i||i<=W)){for(;r<t;l+="0",r++);l=p(l,i)}else if(t-=o,l=j(l,i,"0"),i+1>r){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=i-r)>0)for(i+1==r&&(l+=".");t--;l+="0");return e.s<0&&n?"-"+l:l}function K(e,t){for(var a,s,n=1,i=new $(e[0]);n<e.length;n++)(!(s=new $(e[n])).s||(a=g(i,s))===t||0===a&&i.s===t)&&(i=s);return i}function z(e,t,a){for(var s=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,s++);return(a=s+a*r-1)>I?e.c=e.e=null:a<P?e.c=[e.e=0]:(e.e=a,e.c=t),e}function V(e,t,n,i){var l,c,u,f,m,g,h,v=e.c,p=d;if(v){e:{for(l=1,f=v[0];f>=10;f/=10,l++);if((c=t-l)<0)c+=r,u=t,m=v[g=0],h=s(m/p[l-u-1]%10);else if((g=a((c+1)/r))>=v.length){if(!i)break e;for(;v.length<=g;v.push(0));m=h=0,l=1,u=(c%=r)-r+1}else{for(m=f=v[g],l=1;f>=10;f/=10,l++);h=(u=(c%=r)-r+l)<0?0:s(m/p[l-u-1]%10)}if(i=i||t<0||null!=v[g+1]||(u<0?m:m%p[l-u-1]),i=n<4?(h||i)&&(0==n||n==(e.s<0?3:2)):h>5||5==h&&(4==n||i||6==n&&(c>0?u>0?m/p[l-u]:0:v[g-1])%10&1||n==(e.s<0?8:7)),t<1||!v[0])return v.length=0,i?(t-=e.e+1,v[0]=p[(r-t%r)%r],e.e=-t||0):v[0]=e.e=0,e;if(0==c?(v.length=g,f=1,g--):(v.length=g+1,f=p[r-c],v[g]=u>0?s(m/p[l-u]%p[u])*f:0),i)for(;;){if(0==g){for(c=1,u=v[0];u>=10;u/=10,c++);for(u=v[0]+=f,f=1;u>=10;u/=10,f++);c!=f&&(e.e++,v[0]==o&&(v[0]=1));break}if(v[g]+=f,v[g]!=o)break;v[g--]=0,f=1}for(c=v.length;0===v[--c];v.pop());}e.e>I?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function Y(e){var t,a=e.e;return null===a?e.toString():(t=m(e.c),t=a<=W||a>=F?p(t,a):j(t,a,"0"),e.s<0?"-"+t:t)}return $.clone=e,$.ROUND_UP=0,$.ROUND_DOWN=1,$.ROUND_CEIL=2,$.ROUND_FLOOR=3,$.ROUND_HALF_UP=4,$.ROUND_HALF_DOWN=5,$.ROUND_HALF_EVEN=6,$.ROUND_HALF_CEIL=7,$.ROUND_HALF_FLOOR=8,$.EUCLID=9,$.config=$.set=function(e){var t,a;if(null!=e){if("object"!=typeof e)throw Error(n+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(h(a=e[t],0,u,t),D=a),e.hasOwnProperty(t="ROUNDING_MODE")&&(h(a=e[t],0,8,t),L=a),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((a=e[t])&&a.pop?(h(a[0],-u,0,t),h(a[1],0,u,t),W=a[0],F=a[1]):(h(a,-u,u,t),W=-(F=a<0?-a:a))),e.hasOwnProperty(t="RANGE"))if((a=e[t])&&a.pop)h(a[0],-u,-1,t),h(a[1],1,u,t),P=a[0],I=a[1];else{if(h(a,-u,u,t),!a)throw Error(n+t+" cannot be zero: "+a);P=-(I=a<0?-a:a)}if(e.hasOwnProperty(t="CRYPTO")){if((a=e[t])!==!!a)throw Error(n+t+" not true or false: "+a);if(a){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw U=!a,Error(n+"crypto unavailable");U=a}else U=a}if(e.hasOwnProperty(t="MODULO_MODE")&&(h(a=e[t],0,9,t),R=a),e.hasOwnProperty(t="POW_PRECISION")&&(h(a=e[t],0,u,t),M=a),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(a=e[t]))throw Error(n+t+" not an object: "+a);B=a}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(a=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(a))throw Error(n+t+" invalid: "+a);G="0123456789"==a.slice(0,10),H=a}}return{DECIMAL_PLACES:D,ROUNDING_MODE:L,EXPONENTIAL_AT:[W,F],RANGE:[P,I],CRYPTO:U,MODULO_MODE:R,POW_PRECISION:M,FORMAT:B,ALPHABET:H}},$.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!$.DEBUG)return!0;var t,a,i=e.c,l=e.e,d=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===d||-1===d)&&l>=-u&&l<=u&&l===s(l)){if(0===i[0]){if(0===l&&1===i.length)return!0;break e}if((t=(l+1)%r)<1&&(t+=r),String(i[0]).length==t){for(t=0;t<i.length;t++)if((a=i[t])<0||a>=o||a!==s(a))break e;if(0!==a)return!0}}}else if(null===i&&null===l&&(null===d||1===d||-1===d))return!0;throw Error(n+"Invalid BigNumber: "+e)},$.maximum=$.max=function(){return K(arguments,-1)},$.minimum=$.min=function(){return K(arguments,1)},$.random=(_=9007199254740992,T=Math.random()*_&2097151?function(){return s(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,i,o,l,c,f=0,m=[],g=new $(C);if(null==e?e=D:h(e,0,u),l=a(e/r),U)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(l*=2));f<l;)(c=131072*t[f]+(t[f+1]>>>11))>=9e15?(i=crypto.getRandomValues(new Uint32Array(2)),t[f]=i[0],t[f+1]=i[1]):(m.push(c%1e14),f+=2);f=l/2}else{if(!crypto.randomBytes)throw U=!1,Error(n+"crypto unavailable");for(t=crypto.randomBytes(l*=7);f<l;)(c=281474976710656*(31&t[f])+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15?crypto.randomBytes(7).copy(t,f):(m.push(c%1e14),f+=7);f=l/7}if(!U)for(;f<l;)(c=T())<9e15&&(m[f++]=c%1e14);for(l=m[--f],e%=r,l&&e&&(c=d[r-e],m[f]=s(l/c)*c);0===m[f];m.pop(),f--);if(f<0)m=[o=0];else{for(o=-1;0===m[0];m.splice(0,1),o-=r);for(f=1,c=m[0];c>=10;c/=10,f++);f<r&&(o-=r-f)}return g.e=o,g.c=m,g}),$.sum=function(){for(var e=1,t=arguments,a=new $(t[0]);e<t.length;)a=a.plus(t[e++]);return a},y=function(){var e="0123456789";function t(e,t,a,s){for(var n,i,o=[0],r=0,l=e.length;r<l;){for(i=o.length;i--;o[i]*=t);for(o[0]+=s.indexOf(e.charAt(r++)),n=0;n<o.length;n++)o[n]>a-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/a|0,o[n]%=a)}return o.reverse()}return function(a,s,n,i,o){var r,l,d,c,u,f,g,h,v=a.indexOf("."),p=D,b=L;for(v>=0&&(c=M,M=0,a=a.replace(".",""),f=(h=new $(s)).pow(a.length-v),M=c,h.c=t(j(m(f.c),f.e,"0"),10,n,e),h.e=h.c.length),d=c=(g=t(a,s,n,o?(r=H,e):(r=e,H))).length;0==g[--c];g.pop());if(!g[0])return r.charAt(0);if(v<0?--d:(f.c=g,f.e=d,f.s=i,g=(f=w(f,h,p,b,n)).c,u=f.r,d=f.e),v=g[l=d+p+1],c=n/2,u=u||l<0||null!=g[l+1],u=b<4?(null!=v||u)&&(0==b||b==(f.s<0?3:2)):v>c||v==c&&(4==b||u||6==b&&1&g[l-1]||b==(f.s<0?8:7)),l<1||!g[0])a=u?j(r.charAt(1),-p,r.charAt(0)):r.charAt(0);else{if(g.length=l,u)for(--n;++g[--l]>n;)g[l]=0,l||(++d,g=[1].concat(g));for(c=g.length;!g[--c];);for(v=0,a="";v<=c;a+=r.charAt(g[v++]));a=j(a,d,r.charAt(0))}return a}}(),w=function(){function e(e,t,a){var s,n,i,o,r=0,l=e.length,d=t%c,u=t/c|0;for(e=e.slice();l--;)r=((n=d*(i=e[l]%c)+(s=u*i+(o=e[l]/c|0)*d)%c*c+r)/a|0)+(s/c|0)+u*o,e[l]=n%a;return r&&(e=[r].concat(e)),e}function t(e,t,a,s){var n,i;if(a!=s)i=a>s?1:-1;else for(n=i=0;n<a;n++)if(e[n]!=t[n]){i=e[n]>t[n]?1:-1;break}return i}function a(e,t,a,s){for(var n=0;a--;)e[a]-=n,n=e[a]<t[a]?1:0,e[a]=n*s+e[a]-t[a];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,l,d,c){var u,m,g,h,v,p,j,b,w,y,x,_,T,A,N,O,S,E=n.s==i.s?1:-1,k=n.c,C=i.c;if(!(k&&k[0]&&C&&C[0]))return new $(n.s&&i.s&&(k?!C||k[0]!=C[0]:C)?k&&0==k[0]||!C?0*E:E/0:NaN);for(w=(b=new $(E)).c=[],E=l+(m=n.e-i.e)+1,c||(c=o,m=f(n.e/r)-f(i.e/r),E=E/r|0),g=0;C[g]==(k[g]||0);g++);if(C[g]>(k[g]||0)&&m--,E<0)w.push(1),h=!0;else{for(A=k.length,O=C.length,g=0,E+=2,(v=s(c/(C[0]+1)))>1&&(C=e(C,v,c),k=e(k,v,c),O=C.length,A=k.length),T=O,x=(y=k.slice(0,O)).length;x<O;y[x++]=0);S=C.slice(),S=[0].concat(S),N=C[0],C[1]>=c/2&&N++;do{if(v=0,(u=t(C,y,O,x))<0){if(_=y[0],O!=x&&(_=_*c+(y[1]||0)),(v=s(_/N))>1)for(v>=c&&(v=c-1),j=(p=e(C,v,c)).length,x=y.length;1==t(p,y,j,x);)v--,a(p,O<j?S:C,j,c),j=p.length,u=1;else 0==v&&(u=v=1),j=(p=C.slice()).length;if(j<x&&(p=[0].concat(p)),a(y,p,x,c),x=y.length,-1==u)for(;t(C,y,O,x)<1;)v++,a(y,O<x?S:C,x,c),x=y.length}else 0===u&&(v++,y=[0]);w[g++]=v,y[0]?y[x++]=k[T]||0:(y=[k[T]],x=1)}while((T++<A||null!=y[0])&&E--);h=null!=y[0],w[0]||w.splice(0,1)}if(c==o){for(g=1,E=w[0];E>=10;E/=10,g++);V(b,l+(b.e=g+m*r-1)+1,d,h)}else b.e=m,b.r=+h;return b}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,N=/^([^.]+)\.$/,O=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,E=/^\s*\+(?=[\w.])|^\s+|\s+$/g,x=function(e,t,a,s){var i,o=a?t:t.replace(E,"");if(S.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!a&&(o=o.replace(A,(function(e,t,a){return i="x"==(a=a.toLowerCase())?16:"b"==a?2:8,s&&s!=i?e:t})),s&&(i=s,o=o.replace(N,"$1").replace(O,"0.$1")),t!=o))return new $(o,i);if($.DEBUG)throw Error(n+"Not a"+(s?" base "+s:"")+" number: "+t);e.s=null}e.c=e.e=null},k.absoluteValue=k.abs=function(){var e=new $(this);return e.s<0&&(e.s=1),e},k.comparedTo=function(e,t){return g(this,new $(e,t))},k.decimalPlaces=k.dp=function(e,t){var a,s,n,i=this;if(null!=e)return h(e,0,u),null==t?t=L:h(t,0,8),V(new $(i),e+i.e+1,t);if(!(a=i.c))return null;if(s=((n=a.length-1)-f(this.e/r))*r,n=a[n])for(;n%10==0;n/=10,s--);return s<0&&(s=0),s},k.dividedBy=k.div=function(e,t){return w(this,new $(e,t),D,L)},k.dividedToIntegerBy=k.idiv=function(e,t){return w(this,new $(e,t),0,1)},k.exponentiatedBy=k.pow=function(e,t){var i,o,l,d,c,u,f,m,g=this;if((e=new $(e)).c&&!e.isInteger())throw Error(n+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new $(t)),c=e.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!e.c||!e.c[0])return m=new $(Math.pow(+Y(g),c?e.s*(2-v(e)):+Y(e))),t?m.mod(t):m;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new $(NaN);(o=!u&&g.isInteger()&&t.isInteger())&&(g=g.mod(t))}else{if(e.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||c&&g.c[1]>=24e7:g.c[0]<8e13||c&&g.c[0]<=9999975e7)))return d=g.s<0&&v(e)?-0:0,g.e>-1&&(d=1/d),new $(u?1/d:d);M&&(d=a(M/r+2))}for(c?(i=new $(.5),u&&(e.s=1),f=v(e)):f=(l=Math.abs(+Y(e)))%2,m=new $(C);;){if(f){if(!(m=m.times(g)).c)break;d?m.c.length>d&&(m.c.length=d):o&&(m=m.mod(t))}if(l){if(0===(l=s(l/2)))break;f=l%2}else if(V(e=e.times(i),e.e+1,1),e.e>14)f=v(e);else{if(0===(l=+Y(e)))break;f=l%2}g=g.times(g),d?g.c&&g.c.length>d&&(g.c.length=d):o&&(g=g.mod(t))}return o?m:(u&&(m=C.div(m)),t?m.mod(t):d?V(m,M,L,undefined):m)},k.integerValue=function(e){var t=new $(this);return null==e?e=L:h(e,0,8),V(t,t.e+1,e)},k.isEqualTo=k.eq=function(e,t){return 0===g(this,new $(e,t))},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(e,t){return g(this,new $(e,t))>0},k.isGreaterThanOrEqualTo=k.gte=function(e,t){return 1===(t=g(this,new $(e,t)))||0===t},k.isInteger=function(){return!!this.c&&f(this.e/r)>this.c.length-2},k.isLessThan=k.lt=function(e,t){return g(this,new $(e,t))<0},k.isLessThanOrEqualTo=k.lte=function(e,t){return-1===(t=g(this,new $(e,t)))||0===t},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&0==this.c[0]},k.minus=function(e,t){var a,s,n,i,l=this,d=l.s;if(t=(e=new $(e,t)).s,!d||!t)return new $(NaN);if(d!=t)return e.s=-t,l.plus(e);var c=l.e/r,u=e.e/r,m=l.c,g=e.c;if(!c||!u){if(!m||!g)return m?(e.s=-t,e):new $(g?l:NaN);if(!m[0]||!g[0])return g[0]?(e.s=-t,e):new $(m[0]?l:3==L?-0:0)}if(c=f(c),u=f(u),m=m.slice(),d=c-u){for((i=d<0)?(d=-d,n=m):(u=c,n=g),n.reverse(),t=d;t--;n.push(0));n.reverse()}else for(s=(i=(d=m.length)<(t=g.length))?d:t,d=t=0;t<s;t++)if(m[t]!=g[t]){i=m[t]<g[t];break}if(i&&(n=m,m=g,g=n,e.s=-e.s),(t=(s=g.length)-(a=m.length))>0)for(;t--;m[a++]=0);for(t=o-1;s>d;){if(m[--s]<g[s]){for(a=s;a&&!m[--a];m[a]=t);--m[a],m[s]+=o}m[s]-=g[s]}for(;0==m[0];m.splice(0,1),--u);return m[0]?z(e,m,u):(e.s=3==L?-1:1,e.c=[e.e=0],e)},k.modulo=k.mod=function(e,t){var a,s,n=this;return e=new $(e,t),!n.c||!e.s||e.c&&!e.c[0]?new $(NaN):!e.c||n.c&&!n.c[0]?new $(n):(9==R?(s=e.s,e.s=1,a=w(n,e,0,3),e.s=s,a.s*=s):a=w(n,e,0,R),(e=n.minus(a.times(e))).c[0]||1!=R||(e.s=n.s),e)},k.multipliedBy=k.times=function(e,t){var a,s,n,i,l,d,u,m,g,h,v,p,j,b,w,y=this,x=y.c,_=(e=new $(e,t)).c;if(!(x&&_&&x[0]&&_[0]))return!y.s||!e.s||x&&!x[0]&&!_||_&&!_[0]&&!x?e.c=e.e=e.s=null:(e.s*=y.s,x&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(s=f(y.e/r)+f(e.e/r),e.s*=y.s,(u=x.length)<(h=_.length)&&(j=x,x=_,_=j,n=u,u=h,h=n),n=u+h,j=[];n--;j.push(0));for(b=o,w=c,n=h;--n>=0;){for(a=0,v=_[n]%w,p=_[n]/w|0,i=n+(l=u);i>n;)a=((m=v*(m=x[--l]%w)+(d=p*m+(g=x[l]/w|0)*v)%w*w+j[i]+a)/b|0)+(d/w|0)+p*g,j[i--]=m%b;j[i]=a}return a?++s:j.splice(0,1),z(e,j,s)},k.negated=function(){var e=new $(this);return e.s=-e.s||null,e},k.plus=function(e,t){var a,s=this,n=s.s;if(t=(e=new $(e,t)).s,!n||!t)return new $(NaN);if(n!=t)return e.s=-t,s.minus(e);var i=s.e/r,l=e.e/r,d=s.c,c=e.c;if(!i||!l){if(!d||!c)return new $(n/0);if(!d[0]||!c[0])return c[0]?e:new $(d[0]?s:0*n)}if(i=f(i),l=f(l),d=d.slice(),n=i-l){for(n>0?(l=i,a=c):(n=-n,a=d),a.reverse();n--;a.push(0));a.reverse()}for((n=d.length)-(t=c.length)<0&&(a=c,c=d,d=a,t=n),n=0;t;)n=(d[--t]=d[t]+c[t]+n)/o|0,d[t]=o===d[t]?0:d[t]%o;return n&&(d=[n].concat(d),++l),z(e,d,l)},k.precision=k.sd=function(e,t){var a,s,n,i=this;if(null!=e&&e!==!!e)return h(e,1,u),null==t?t=L:h(t,0,8),V(new $(i),e,t);if(!(a=i.c))return null;if(s=(n=a.length-1)*r+1,n=a[n]){for(;n%10==0;n/=10,s--);for(n=a[0];n>=10;n/=10,s++);}return e&&i.e+1>s&&(s=i.e+1),s},k.shiftedBy=function(e){return h(e,-9007199254740991,l),this.times("1e"+e)},k.squareRoot=k.sqrt=function(){var e,t,a,s,n,i=this,o=i.c,r=i.s,l=i.e,d=D+4,c=new $("0.5");if(1!==r||!o||!o[0])return new $(!r||r<0&&(!o||o[0])?NaN:o?i:1/0);if(0==(r=Math.sqrt(+Y(i)))||r==1/0?(((t=m(o)).length+l)%2==0&&(t+="0"),r=Math.sqrt(+t),l=f((l+1)/2)-(l<0||l%2),a=new $(t=r==1/0?"5e"+l:(t=r.toExponential()).slice(0,t.indexOf("e")+1)+l)):a=new $(r+""),a.c[0])for((r=(l=a.e)+d)<3&&(r=0);;)if(n=a,a=c.times(n.plus(w(i,n,d,1))),m(n.c).slice(0,r)===(t=m(a.c)).slice(0,r)){if(a.e<l&&--r,"9999"!=(t=t.slice(r-3,r+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(V(a,a.e+D+2,1),e=!a.times(a).eq(i));break}if(!s&&(V(n,n.e+D+2,0),n.times(n).eq(i))){a=n;break}d+=4,r+=4,s=1}return V(a,a.e+D+1,L,e)},k.toExponential=function(e,t){return null!=e&&(h(e,0,u),e++),q(this,e,t,1)},k.toFixed=function(e,t){return null!=e&&(h(e,0,u),e=e+this.e+1),q(this,e,t)},k.toFormat=function(e,t,a){var s,i=this;if(null==a)null!=e&&t&&"object"==typeof t?(a=t,t=null):e&&"object"==typeof e?(a=e,e=t=null):a=B;else if("object"!=typeof a)throw Error(n+"Argument not an object: "+a);if(s=i.toFixed(e,t),i.c){var o,r=s.split("."),l=+a.groupSize,d=+a.secondaryGroupSize,c=a.groupSeparator||"",u=r[0],f=r[1],m=i.s<0,g=m?u.slice(1):u,h=g.length;if(d&&(o=l,l=d,d=o,h-=o),l>0&&h>0){for(o=h%l||l,u=g.substr(0,o);o<h;o+=l)u+=c+g.substr(o,l);d>0&&(u+=c+g.slice(o)),m&&(u="-"+u)}s=f?u+(a.decimalSeparator||"")+((d=+a.fractionGroupSize)?f.replace(new RegExp("\\d{"+d+"}\\B","g"),"$&"+(a.fractionGroupSeparator||"")):f):u}return(a.prefix||"")+s+(a.suffix||"")},k.toFraction=function(e){var t,a,s,i,o,l,c,u,f,g,h,v,p=this,j=p.c;if(null!=e&&(!(c=new $(e)).isInteger()&&(c.c||1!==c.s)||c.lt(C)))throw Error(n+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Y(c));if(!j)return new $(p);for(t=new $(C),f=a=new $(C),s=u=new $(C),v=m(j),o=t.e=v.length-p.e-1,t.c[0]=d[(l=o%r)<0?r+l:l],e=!e||c.comparedTo(t)>0?o>0?t:f:c,l=I,I=1/0,c=new $(v),u.c[0]=0;g=w(c,t,0,1),1!=(i=a.plus(g.times(s))).comparedTo(e);)a=s,s=i,f=u.plus(g.times(i=f)),u=i,t=c.minus(g.times(i=t)),c=i;return i=w(e.minus(a),s,0,1),u=u.plus(i.times(f)),a=a.plus(i.times(s)),u.s=f.s=p.s,h=w(f,s,o*=2,L).minus(p).abs().comparedTo(w(u,a,o,L).minus(p).abs())<1?[f,s]:[u,a],I=l,h},k.toNumber=function(){return+Y(this)},k.toPrecision=function(e,t){return null!=e&&h(e,1,u),q(this,e,t,2)},k.toString=function(e){var t,a=this,s=a.s,n=a.e;return null===n?s?(t="Infinity",s<0&&(t="-"+t)):t="NaN":(null==e?t=n<=W||n>=F?p(m(a.c),n):j(m(a.c),n,"0"):10===e&&G?t=j(m((a=V(new $(a),D+n+1,L)).c),a.e,"0"):(h(e,2,H.length,"Base"),t=y(j(m(a.c),n,"0"),10,e,s,!0)),s<0&&a.c[0]&&(t="-"+t)),t},k.valueOf=k.toJSON=function(){return Y(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,null!=b&&$.set(b),$}(),e.default=e.BigNumber}));var __awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/flamingo-api/api/api-client",["require","exports","axios"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.api=t.default.create({baseURL:"https://neo-api.b-cdn.net"})}getWalletWalletHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/wallet/history",{neo_address:e,page:t})}))}getWalletWalletLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/wallet/latest",{neo_address:e})}))}getWalletClaimsHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/claims/history",{neo_address:e,page:t})}))}getWalletClaimsLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/claims/latest",{neo_address:e})}))}getWalletTradeHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/trade/history",{neo_address:e,page:t})}))}getWalletTradeLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/trade/latest",{neo_address:e})}))}getWalletLpHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lp/history",{neo_address:e,page:t})}))}getWalletLpLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lp/latest",{neo_address:e})}))}getWalletStakingHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/staking/history",{neo_address:e,page:t})}))}getWalletStakingLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/staking/latest",{neo_address:e})}))}getWalletLendHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lend/history",{neo_address:e,page:t})}))}getWalletLendLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/lend/latest",{neo_address:e})}))}getWalletTransferHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/transfer/history",{neo_address:e,page:t})}))}getWalletTransferLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/wallet/transfer/latest",{neo_address:e})}))}getFlamingoLivedataPricesLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/prices/latest",{})}))}getFlamingoLivedataPricesFromblock(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-block/${e}`,{})}))}getFlamingoLivedataPricesFromdatetime({year:e,month:t,day:a,hour:s,minute:n}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-datetime/${e}/${t}/${a}/${s}/${n}`,{})}))}getFlamingoLivedataPricesFromtimestamp(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/prices/from-timestamp/${e}`,{})}))}getFlamingoLivedataFiatexchangerate(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/live-data/fiat-exchange-rate/${e}`,{})}))}getFlamingoLivedataClaimsHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/claims/history",{page:e})}))}getFlamingoLivedataClaimsLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/claims/latest",{})}))}getFlamingoLivedataTradeHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/trade/history",{page:e})}))}getFlamingoLivedataTradeLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/trade/latest",{})}))}getFlamingoLivedataLpHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lp/history",{page:e})}))}getFlamingoLivedataLpLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lp/latest",{})}))}getFlamingoLivedataStakingHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/staking/history",{page:e})}))}getFlamingoLivedataStakingLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/staking/latest",{})}))}getFlamingoLivedataLendHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lend/history",{page:e})}))}getFlamingoLivedataLendLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/lend/latest",{})}))}getFlamingoLivedataTransferHistory(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/transfer/history",{page:e})}))}getFlamingoLivedataTransferLatest(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/live-data/transfer/latest",{})}))}getFlamingoAnalyticsMonthhistory(e,{year:t,month:a}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/month-history/${e}`,{year:t,month:a})}))}getFlamingoAnalyticsMonthlatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/month-latest/${e}`,{})}))}getFlamingoAnalyticsDailyhistory(e,{year:t,month:a,day:s}){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/daily-history/${e}`,{year:t,month:a,day:s})}))}getFlamingoAnalyticsDailylatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/daily-latest/${e}`,{})}))}getFlamingoAnalyticsRolling30days(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData(`/flamingo/analytics/rolling-30-days/${e}`,{})}))}getFlamingoAnalyticsFlamingoTotalsupply(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/analytics/flamingo/total-supply",{})}))}getFlamingoAnalyticsFlamingoUsdvaluelocked(){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/flamingo/analytics/flamingo/usd-value-locked",{})}))}getNeoBlock(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/block",{index:e,flamingo_data:t})}))}getNeoBlockLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/block/latest",{flamingo_data:e})}))}getNeoBlocksHistory(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/blocks/history",{page:e,flamingo_data:t})}))}getNeoBlocksLatest(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/blocks/latest",{flamingo_data:e})}))}getNeoTransaction(e){return __awaiter(this,void 0,void 0,(function*(){return this.fetchData("/neo/transaction",{tx_hash:e})}))}fetchData(e,t={}){return __awaiter(this,void 0,void 0,(function*(){try{return(yield this.api.get(e,{params:t})).data}catch(t){throw console.error("Error fetching data from URL:",e,t),t}}))}}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/wallet-manager/wallet-lib",["require","exports","@cityofzion/neon-core","@cityofzion/neon-core-neo3","ojs/ojlogger","axios","./bignumber","dashboard/flamingo-api/api/api-client","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojchart","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup","ojs/ojpopup","ojs/ojdefer"],(function(require,e,t,a,s,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addressFormat=e.STORAGE_VALUE_MESSAGE=e.DEFAULT_RPC_URLS=e.DEFAULT_N3_RPC_NETWORK=e.DEFAULT_N2_RPC_NETWORK=e.STORAGE_VALUE_TYPE=e.STORAGE_NAME=e.NetworkType=e.saveSelectedTagsToStorage=e.getSelectedTagsFromStorage=e.addToRatiosInStorage=e.loadRatiosFromStorage=e.deleteWalletFromStorage=e.updateWalletToStorage=e.addWalletToStorage=e.addWalletToStoragePK=e.loadWalletsFromStorage=e.loadWalletsFromStoragePK=e.getN3AllTxs=e.getN3AssetTxs=e.handleN3TxResponse=e.getN3AddressBalances=e.GAS3_CONTRACT=e.NEO3_CONTRACT=e.CWallet=e.KEY=void 0;new o.default,new t.rpc.RPCClient("https://rpc2.n3.nspcc.ru:10331");e.KEY="xxx";class r extends a.wallet.Wallet{constructor(e){super(e)}export(){return super.export()}}e.CWallet=r,e.NEO3_CONTRACT="0xef4073a0f2b305a38ec4050e4d3d28bc40ea63f5",e.GAS3_CONTRACT="0xd2a4cff31913016155e38e474a2c06d08be276cf";const l={NEO:{asset_id:e.NEO3_CONTRACT,symbol:"NEO",decimals:0,balance:"0"},GAS:{asset_id:e.GAS3_CONTRACT,symbol:"GAS",decimals:8,balance:"0"}};e.getN3AddressBalances=t=>__awaiter(void 0,void 0,void 0,(function*(){const a={jsonrpc:"2.0",method:"getnep17balances",params:[t],id:1};return(t=>{const a=[Object.assign({},l.NEO),Object.assign({},l.GAS)];return((null==t?void 0:t.balance)||[]).forEach((t=>{if(t.assethash===e.NEO3_CONTRACT)a[0].balance=t.amount;else if(t.assethash===e.GAS3_CONTRACT)a[1].balance=(0,i.default)(t.amount,10).shiftedBy(-t.decimals).toFixed();else{const e={balance:(0,i.default)(t.amount,10).shiftedBy(-t.decimals).toFixed(),asset_id:t.assethash,symbol:t.symbol,decimals:t.decimals};a.push(e)}})),Promise.resolve(a)})((yield n.default.post(e.DEFAULT_N3_RPC_NETWORK[0].rpcUrl,a)).data.result)}));const d=new Map,c=new Map;new Map;function u(t){const a=[],s=[],i=[];return t.forEach(((e,t)=>{if(d.has(e))i[t]=d.get(e);else{const n={jsonrpc:"2.0",id:1,method:"invokefunction",params:[e,"symbol"]};s.push(t),a.push(n)}})),0===a.length?Promise.resolve(i):n.default.post(e.DEFAULT_N3_RPC_NETWORK[0].rpcUrl,a).then((e=>(e.data.forEach(((e,a)=>{let n="";e.result.stack&&(n=e.result.stack[0].value,
"ByteArray"===e.result.stack[0].type&&(n=b(e.result.stack[0].value)),"ByteString"===e.result.stack[0].type&&(n=b(function(e){const t=atob(e);let a="";for(let e=0;e<t.length;e++){const s=t.charCodeAt(e).toString(16);a+=2===s.length?s:"0"+s}return a.toUpperCase()}(e.result.stack[0].value))));const o=s[a];d.set(t[o],n),i[o]=n})),i)))}e.handleN3TxResponse=a=>__awaiter(void 0,void 0,void 0,(function*(){const s=[];((null==a?void 0:a.sent)||[]).forEach((e=>{const t={block_time:Math.floor(e.timestamp/1e3),asset_id:e.assethash,from:[a.address],to:[e.transferaddress],value:`-${e.amount}`,txid:e.txhash,type:"sent",id:e.blockindex};s.push(t)})),((null==a?void 0:a.received)||[]).forEach((e=>{const t={block_time:Math.floor(e.timestamp/1e3),asset_id:e.assethash,from:[e.transferaddress],to:[a.address],value:e.amount,txid:e.txhash,type:"received",id:e.blockindex};s.push(t)})),s.sort(((e,t)=>0===e.txid.localeCompare(t.txid)?e.asset_id.localeCompare(t.asset_id):e.txid.localeCompare(t.txid)));for(let e=1;e<s.length;)s[e].txid===s[e-1].txid&&s[e].asset_id===s[e-1].asset_id?(s[e].value=(0,i.default)(s[e].value,10).plus((0,i.default)(s[e-1].value,10)),s[e].type=s[e].value.comparedTo(0)>0?"received":"sent",s[e].value=s[e].value.toFixed(),s.splice(e-1,1)):e++;const o=new Set;return s.forEach((e=>o.add(e.asset_id))),yield u(Array.from(o)),yield function(a){const s=[],o=[],r=[];return a.forEach(((e,t)=>{if(c.has(e))r[t]=c.get(e);else{const a={jsonrpc:"2.0",id:1,method:"invokefunction",params:[e,"decimals"]};o.push(t),s.push(a)}})),0===s.length?Promise.resolve(r):n.default.post(e.DEFAULT_N3_RPC_NETWORK[0].rpcUrl,s).then((e=>(e.data.forEach(((e,s)=>{let n=0;if(e.result.stack&&(n=e.result.stack[0].value,"Integer"===e.result.stack[0].type&&(n=Number(e.result.stack[0].value||0)),"ByteArray"===e.result.stack[0].type)){const a=t.u.reverseHex(e.result.stack[0].value);n=(0,i.default)(a||0,16).toNumber()}const l=o[s];c.set(a[l],n),r[l]=n})),r)))}(Array.from(o)),s.forEach(((e,t)=>{s[t].symbol=d.get(e.asset_id);const a=c.get(e.asset_id);a&&(s[t].value=(0,i.default)(s[t].value,10).shiftedBy(-a).toFixed())})),s}));e.getN3AssetTxs=(t,a)=>__awaiter(void 0,void 0,void 0,(function*(){return(yield(0,e.getN3AllTxs)(t)).filter((e=>e.asset_id===a))}));e.getN3AllTxs=t=>__awaiter(void 0,void 0,void 0,(function*(){const a=Math.floor((new Date).getTime())-2592e6,s={jsonrpc:"2.0",method:"getnep17transfers",params:[t,a],id:1};let i=yield n.default.post(e.DEFAULT_N3_RPC_NETWORK[0].rpcUrl,s);return i=yield(0,e.handleN3TxResponse)(i.data.result),i=i.sort(((e,t)=>t.block_time-e.block_time)),i}));e.loadWalletsFromStoragePK=()=>(console.log("wallet-lib > loadWalletsFromStorage"),h(m["walletArr-Neo3"]));e.loadWalletsFromStorage=()=>(console.log("wallet-lib > loadWalletsFromStorage"),h(m["walletPubArr-Neo3"]));e.addWalletToStoragePK=(t,n,i,o)=>{const l=new a.wallet.Account(n),d=a.wallet.isAddress(l.address,53)?"Neo3":"Neo2";s.info("configureWallet > chainType =",d);const c=new r({name:null!=t?t:"nxTraderUser",walletColor:o.toString()});c.walletColor=o,c.addAccount(l),c.displayName=t;c.accounts[0].WIF;c.encrypt(0,i);const u=(0,e.loadWalletsFromStoragePK)();u.push(c),v(m.chainType,d),v(m["walletArr-Neo3"],u);const{address:f}=l};e.addWalletToStorage=(t,a,n,i,o,l)=>{const d="Neo3";s.info("configureWallet > chainType =",d);const c=new r({name:null!=t?t:"nxTraderUser",walletColor:o.toString()});c.walletColor=o,c.publicKey=a,c.goal=i,c.tags=l,c.displayName=t;const u=(0,e.loadWalletsFromStorage)();u.push(c),v(m.chainType,d),v(m["walletPubArr-Neo3"],u)};e.updateWalletToStorage=(t,a,s,n,i,o)=>{const r=(0,e.loadWalletsFromStorage)(),l=r.find((e=>e.name===t));if(l){const e=l;n&&(e.walletColor=n),e.goal=s,console.log("try save ",i),e.tags=i,e.publicKey=a,e.displayName=null!=o?o:t}v(m["walletPubArr-Neo3"],r)};e.deleteWalletFromStorage=t=>{const a=(0,e.loadWalletsFromStorage)(),s=a.find((e=>e.name===t)),n=a.findIndex((e=>e.name===t));console.log("wallet-lib > deleteWalletFromStorage",s,n,a),a.splice(n,1),v(m["walletPubArr-Neo3"],a)};e.loadRatiosFromStorage=()=>h(m.ratios);e.addToRatiosInStorage=(t,a)=>{const s=(0,e.loadRatiosFromStorage)();s.set(t,a);v(m.ratios,s)};e.getSelectedTagsFromStorage=()=>(console.log("wallet-lib > getSelectedTagsFromStorage"),h(m.selectedTags));var f,m,g;function h(t){let a=localStorage[t],s=a;switch(e.STORAGE_VALUE_MESSAGE[t].type){case g.object:s=a&&"undefined"!==a?JSON.parse(a):{};break;case g.array:s=a&&"undefined"!==a?JSON.parse(a):[];break;case g.map:s=a&&"undefined"!==a?new Map(JSON.parse(a)):new Map;break;case g.number:s=a&&"undefined"!==a?Number(a):0;break;case g.boolean:s="true"===a}return s}function v(t,a){let s=a;switch(e.STORAGE_VALUE_MESSAGE[t].type){case g.object:case g.array:s=JSON.stringify(a);break;case g.number:case g.boolean:s=String(a);break;case g.array:s=JSON.stringify(a)}localStorage.setItem(t,s)}e.saveSelectedTagsToStorage=e=>{v(m.selectedTags,e)},function(e){e.MainNet="MainNet",e.TestNet="TestNet",e.N3MainNet="N3MainNet",e.N3TestNet="N3TestNet",e.N3PrivateNet="N3PrivateNet"}(f=e.NetworkType||(e.NetworkType={})),function(e){e.n2Networks="n2Networks",e.n3Networks="n3Networks",e.n2SelectedNetworkIndex="n2SelectedNetworkIndex",e.n3SelectedNetworkIndex="n3SelectedNetworkIndex",e.coinsRate="coinsRate",e.fiatRate="fiatRate",e.neo3CoinsRate="neo3CoinsRate",e.rateCurrency="rateCurrency",e.wallet="wallet",e.walletArr="walletArr",e["walletArr-Neo3"]="walletArr-Neo3",e["walletPubArr-Neo3"]="walletPubArr-Neo3",e.WIFArr="WIFArr",e["WIFArr-Neo3"]="WIFArr-Neo3",e.chainType="chainType",e.neo3AddressFlag="neo3AddressFlag",e.lang="lang",e.transaction="transaction",e.connectedWebsites="connectedWebsites",e.authAddress="authAddress",e.InvokeArgsArray="InvokeArgsArray",e.walletsStatus="walletsStatus",e.haveBackupTip="haveBackupTip",e.hasLoginAddress="hasLoginAddress",e.shouldFindNode="shouldFindNode",e.rpcUrls="rpcUrls",e.neo3RemoveT4Flag="neo3RemoveT4Flag",e.onePassword="onePassword",e.theme="theme",e.onePassCheckAddresses="onePassCheckAddresses",e.ratios="ratios",e.selectedTags="selectedTags"}(m=e.STORAGE_NAME||(e.STORAGE_NAME={})),function(e){e.number="number",e.string="string",e.object="object",e.map="map",e.boolean="boolean",e.array="array"}(g=e.STORAGE_VALUE_TYPE||(e.STORAGE_VALUE_TYPE={})),e.DEFAULT_N2_RPC_NETWORK=[{rpcUrl:"http://seed1.ngd.network:10332",name:"N2 MAINNET",explorer:"https://neo2.neotube.io/",network:f.MainNet,chainId:1,id:1},{rpcUrl:"http://seed5.ngd.network:20332",name:"N2 TESTNET",explorer:"",network:f.TestNet,chainId:2,id:2}],e.DEFAULT_N3_RPC_NETWORK=[{rpcUrl:"https://n3seed1.ngd.network:10332",name:"N3 MAINNET",magicNumber:860833102,explorer:"https://neotube.io/",network:f.N3MainNet,chainId:3,id:3},{rpcUrl:"http://seed3t5.neo.org:20332",name:"N3 TESTNET",magicNumber:894710606,explorer:"https://testnet.neotube.io/",network:f.N3TestNet,chainId:6,id:6}],e.DEFAULT_RPC_URLS={lastModified:null,nodes:{1:["http://seed6.ngd.network:10332","http://seed8.ngd.network:10332"],2:["http://seed3.ngd.network:20332","http://seed4.ngd.network:20332","http://seed5.ngd.network:20332","http://seed8.ngd.network:20332"],3:["http://seed1.neo.org:10332","http://seed2.neo.org:10332","http://seed3.neo.org:10332","http://seed4.neo.org:10332","http://seed5.neo.org:10332","https://n3seed1.ngd.network:10332","https://n3seed2.ngd.network:10332","https://neo3-mainnet.neoline.vip"],6:["http://seed1t5.neo.org:20332","http://seed2t5.neo.org:20332","http://seed3t5.neo.org:20332","http://seed4t5.neo.org:20332","http://seed5t5.neo.org:20332"]}},e.STORAGE_VALUE_MESSAGE={n2Networks:{type:g.array,isLocal:!0,default:e.DEFAULT_N2_RPC_NETWORK},n3Networks:{type:g.array,isLocal:!0,default:e.DEFAULT_N3_RPC_NETWORK},n2SelectedNetworkIndex:{type:g.number,isLocal:!0,default:0},n3SelectedNetworkIndex:{type:g.number,isLocal:!0,default:0},coinsRate:{type:g.object,isLocal:!1},fiatRate:{type:g.object,isLocal:!1},neo3CoinsRate:{type:g.object,isLocal:!1},rateCurrency:{type:g.string,isLocal:!1,default:"USD"},wallet:{type:g.object,isLocal:!0},walletArr:{type:g.array,isLocal:!0},"walletArr-Neo3":{type:g.array,isLocal:!0},"walletPubArr-Neo3":{type:g.array,isLocal:!0},WIFArr:{type:g.array,isLocal:!0},"WIFArr-Neo3":{type:g.array,isLocal:!0},chainType:{type:g.string,isLocal:!0},neo3AddressFlag:{type:g.boolean,isLocal:!0},lang:{type:g.string,isLocal:!1,default:"en"},transaction:{type:g.object,isLocal:!1},connectedWebsites:{type:g.object,isLocal:!1},authAddress:{type:g.object,isLocal:!1},InvokeArgsArray:{type:g.array,isLocal:!0},walletsStatus:{type:g.object,isLocal:!0},haveBackupTip:{type:g.boolean,isLocal:!0},hasLoginAddress:{type:g.object,isLocal:!0},shouldFindNode:{type:g.boolean,isLocal:!0},rpcUrls:{type:g.object,isLocal:!0,default:e.DEFAULT_RPC_URLS},neo3RemoveT4Flag:{type:g.boolean,isLocal:!0},onePassword:{type:g.boolean,isLocal:!0},theme:{type:g.string,isLocal:!1,default:"light-theme"},onePassCheckAddresses:{type:g.object,isLocal:!0},ratios:{type:g.map,isLocal:!0},selectedTags:{type:g.array,isLocal:!0}};const p=/^([0-9A-Fa-f]{2})*$/;function j(e){if(!function(e){try{return p.test(e)}catch(e){return!1}}(e))throw new Error(`Expected a hexstring but got ${e}`)}function b(e){return t=function(e){if(j(e),!e.length)return new Uint8Array(0);const t=e.length/2,a=new Uint8Array(t);for(let s=0;s<t;s++)a[s]=parseInt(e.substring(0,2),16),e=e.substring(2);return a}(e),String.fromCharCode.apply(null,Array.from(new Uint8Array(t)));var t}e.addressFormat=e=>{try{return`${e.substring(0,6)}...${e.substring(e.length-6,e.length)}`}catch(e){}return e}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/price-list/price-list",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","preact/hooks","@preact/signals","ojs/ojconverter-number","ojs/ojarraydataprovider","dashboard/flamingo-api/api/api-client","css!dashboard/price-list/price-list-styles.css","ojs/ojlistview","ojs/ojlistitemlayout"],(function(require,e,t,a,s,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.startPriceRefreshTimer=e.isAutoPriceRefreshRunning=e.stopPriceRefreshTimer=e.PriceList=e.prices=void 0;e.prices=(0,n.signal)([]);let l=(0,n.signal)(0);const d=new r.default;function c(){(function(){return __awaiter(this,void 0,void 0,(function*(){return d.getFlamingoLivedataPricesLatest()}))})().then((t=>{console.log("price-list > refreshPrices > completed",t),e.prices.value=function(e){var t=e.filter((e=>"bNEO"===e.symbol));1===t.length&&e.push({hash:t[0].hash,symbol:"NEO",unwrappedSymbol:"NEO",usd_price:t[0].usd_price});return e}(t)}))}function u(){0!==l.value&&(console.log("price-list > stop refresh timer"),clearInterval(l.value),l.value=0)}function f(){0===l.value&&(console.log("price-list > start refresh timer"),l.value=setInterval(c,3e5))}e.PriceList=(0,a.registerCustomElement)("dashboard-price-list",(function({pricesToShow:a}){const n=e.prices.value.filter((function(e){return!!a&&a.indexOf(e.symbol)>=0})),r=new o(null!=n?n:[],{keyAttributes:"symbol"}),l=new i.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12});return(0,s.useEffect)((()=>(c(),f(),()=>u())),[]),(0,t.jsx)("div",{children:(0,t.jsx)("oj-list-view",Object.assign({id:"lvPrices","aria-label":"flamingo price list",data:r,class:"oj-listview-item-padding-off","selection-mode":"none"},{children:(0,t.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>(0,t.jsx)("div",{children:(0,t.jsxs)("div",Object.assign({className:"oj-flex oj-sm-padding-2x"},{children:[(0,t.jsx)("img",{src:`styles/images/${e.item.data.symbol}.svg`,class:"token"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",Object.assign({className:"oj-flex"},{children:[(0,t.jsx)("span",Object.assign({class:"oj-typography-body-md oj-text-color-primary"},{children:e.item.data.unwrappedSymbol})),(0,t.jsxs)("span",Object.assign({class:"oj-typography-body-sm oj-text-color-secondary oj-md-padding-2x-start oj-sm-padding-1x-top"},{children:["(",e.item.data.symbol,")"]}))]})),(0,t.jsx)("div",Object.assign({style:{fontSize:22}},{children:l.format(e.item.data.usd_price)}))]})]}))})})}))})}),"PriceList",{properties:{pricesToShow:{type:"Array<string>"}}}),e.stopPriceRefreshTimer=u,e.isAutoPriceRefreshRunning=(0,n.computed)((()=>l.value>0)),e.startPriceRefreshTimer=f})),define("dashboard/wallet-manager/wallet-list-filter",["require","exports","preact/jsx-runtime","./wallet-manager","ojs/ojarraydataprovider","./wallet-lib"],(function(require,e,t,a,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletListFilter=void 0,e.WalletListFilter=function({}){console.log("wallet-list-filter > render",a.tagsAsArray.value);const e=new s(a.tagsAsArray.value,{keyAttributes:"name"});return(0,t.jsx)("div",Object.assign({style:"width: 90%"},{children:(0,t.jsx)("oj-select-many",{labelHint:"filter wallets by tags :",labelEdge:"inside",options:e,value:a.selectedTags.value,onvalueChanged:e=>{"internal"===e.detail.updatedFrom&&(console.log("wallet-list-filter > onvalueChanged",e.detail.updatedFrom,e.detail.previousValue,e.detail.value),a.selectedTags.value=e.detail.value,(0,n.saveSelectedTagsToStorage)(e.detail.value))}})}))}})),define("dashboard/wallet-manager/form-elements",["require","exports","@preact/signals"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tbnDisabled=e.brbHidden=e.bcloHidden=e.bclrHidden=e.buHidden=e.bcrHidden=e.bawHidden=e.tdnHidden=void 0,console.log("form-elements > init"),e.tdnHidden=(0,t.signal)(!0),e.bawHidden=(0,t.signal)(!1),e.bcrHidden=(0,t.signal)(!1),e.buHidden=(0,t.signal)(!0),e.bclrHidden=(0,t.signal)(!1),e.bcloHidden=(0,t.signal)(!0),e.brbHidden=(0,t.signal)(!0),e.tbnDisabled=(0,t.signal)(!1)})),define("dashboard/wallet-manager/wallet-list",["require","exports","preact/jsx-runtime","preact/hooks","@preact/signals","ojs/ojarraydataprovider","ojs/ojconverter-number","ojs/ojcolor","ojs/ojcolor","dashboard/price-list/price-list","./wallet-list-filter","./form-elements","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojbutton","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup","ojs/ojgauge"],(function(require,e,t,a,s,n,i,o,r,l,d,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refreshLastUpdatedTime=e.WalletList=void 0;let u=(0,s.signal)(void 0),f=(0,s.signal)(0);const m=(0,s.computed)((()=>!l.isAutoPriceRefreshRunning.value)),g=(0,s.computed)((()=>!!l.isAutoPriceRefreshRunning.value));function h(){console.log("wallet-list > refreshLastUpdatedLabel");var e=Math.abs(Date.now()-u.peek()),t=Math.floor(e/1e3);f.value=t}e.WalletList=function({wallets:e,walletsMetadata:s,showAddWallet:u,showEditWallet:v,tryDeleteWallet:p,walletSelected:j,refreshAllWalletBalances:b}){const w=new i.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12}),y=new n(e,{keyAttributes:"name"});return(0,a.useEffect)((()=>{const e=setInterval(h,1e4);return()=>clearInterval(e)}),[]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",Object.assign({className:"oj-flex oj-sm-margin-7x-start oj-sm-margin-7x-end"},{children:[(0,t.jsxs)("oj-button",Object.assign({id:"butAddWallet",display:"all",onojAction:u,class:"oj-button-sm",hidden:c.bawHidden.value},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-plus"}),"Add Wallet"]})),(0,t.jsx)("span",{className:"oj-flex-item"}),(0,t.jsxs)("span",Object.assign({class:"oj-sm-padding-2x-end oj-sm-padding-4x-top oj-text-color-secondary"},{children:["last updated ",f," second(s) ago"]})),(0,t.jsxs)("oj-button",Object.assign({id:"butRefreshBalances",display:"icons",hidden:c.brbHidden.value,onojAction:b,class:"oj-button-sm oj-sm-flex-initial oj-flex-item  oj-sm-margin-2x-end"},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-refresh"}),"Refresh wallet balances"]})),(0,t.jsxs)("oj-button",Object.assign({id:"butPause",display:"icons",onojAction:l.stopPriceRefreshTimer,class:"oj-button-sm oj-sm-flex-initial oj-flex-item",hidden:m.value},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-pause"}),"Pause autorefresh"]})),(0,t.jsxs)("oj-button",Object.assign({id:"butPlay",display:"icons",onojAction:l.startPriceRefreshTimer,class:"oj-button-sm oj-sm-flex-initial oj-flex-item",hidden:g.value},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-play"}),"Start autorefresh (runs every 60 seconds)"]}))]})),(0,t.jsx)("oj-list-view",Object.assign({id:"lvWallets","aria-label":"wallets",data:y,gridlines:{item:"visible"},class:"nx-wallet-list oj-sm-padding-3x-top oj-sm-padding-3x-start oj-sm-padding-3x-end",selectionMode:"none",onselectedChanged:j},{children:(0,t.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:function(e){var a,n;const i={width:"5px",height:"50px",backgroundColor:(e.item.data.walletColor?new r(e.item.data.walletColor):o.BLACK).toString()},l=s.get(e.key);let d=0;return l&&"runningWalletTotalInUsd"in l&&(d=l.runningWalletTotalInUsd),(0,t.jsx)("li",Object.assign({style:"align-items:center;"},{children:(0,t.jsxs)("oj-list-item-layout",Object.assign({style:"width:100%"},{children:[(0,t.jsx)("div",{slot:"leading",style:i}),(0,t.jsx)("div",Object.assign({class:"oj-typography-body-md oj-text-color-primary"},{children:null!==(a=e.item.data.displayName)&&void 0!==a?a:e.item.data.name})),(0,t.jsx)("div",Object.assign({slot:"secondary",class:"oj-typography-body-sm oj-text-color-secondary",style:"min-width: 200px;"},{children:e.item.data.publicKey?e.item.data.publicKey:e.item.data.accounts[0].label})),(0,t.jsx)("div",Object.assign({slot:"tertiary",class:"oj-flex oj-typography-body-sm oj-text-color-secondary"},{children:null===(n=e.item.data.tags)||void 0===n?void 0:n.map((e=>(0,t.jsx)("div",Object.assign({class:"tag-item"},{children:e}))))})),(0,t.jsxs)("div",Object.assign({slot:"metadata",class:"oj-flex"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",style:{width:"25px"}}),(0,t.jsx)("span",Object.assign({class:"oj-sm-padding-2x-start oj-sm-padding-2x-end oj-sm-padding-6x-top",style:{verticalAlign:"super"}},{children:w.format(null!=d?d:0)})),(0,t.jsx)("oj-status-meter-gauge",{"labelled-by":"readOnly",orientation:"circular",min:0,max:e.item.data.goal,value:null!=d?d:0,metricLabel:{rendered:"off"},plotArea:{rendered:"on"},innerRadius:.57,size:"sm",startAngle:180,angleExtent:180,class:"oj-sm-padding-3x-top oj-sm-margin-0x",hidden:!(e.item.data.goal&&e.item.data.goal>0),readonly:!0})]})),(0,t.jsx)("div",{slot:"trailing",style:{width:"50px"}}),(0,t.jsxs)("div",Object.assign({slot:"action"},{children:[(0,t.jsxs)("oj-button",Object.assign({id:"bEdit",display:"icons",onojAction:v,class:"oj-button-sm","row-data":e.item.data.name},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-edit"}),"Edit"]})),(0,t.jsxs)("oj-button",Object.assign({id:"bDelete",display:"icons",onojAction:p,class:"oj-button-sm oj-sm-padding-2x-start","row-data":e.item.data.name},{children:[(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-trash"}),"Delete"]}))]}))]}))}))}})})),(0,t.jsx)("ul",{children:(x=function(e){let t=0,a=0;return e.forEach(((e,s)=>{let n=0;if(e&&"goal"in e&&(n=e.goal,a+=n),e&&"runningWalletTotalInUsd"in e){const a=e.runningWalletTotalInUsd;t+=a}})),{runningWalletsTotalInUsd:t,runningGoal:a}}(s),(0,t.jsxs)("oj-list-item-layout",Object.assign({id:"lilFooter",style:""},{children:[(0,t.jsx)("div",{children:(0,t.jsx)(d.WalletListFilter,{})}),(0,t.jsxs)("div",Object.assign({slot:"metadata",class:"oj-flex"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",style:{width:"25px"}}),(0,t.jsx)("span",Object.assign({class:"oj-sm-padding-2x-start oj-sm-padding-2x-end oj-sm-padding-6x-top",style:{verticalAlign:"super"}},{children:w.format(null!==(_=x.runningWalletsTotalInUsd)&&void 0!==_?_:0)})),(0,t.jsx)("oj-status-meter-gauge",{"labelled-by":"readOnly",orientation:"circular",min:0,max:x.runningGoal,value:null!==(T=x.runningWalletsTotalInUsd)&&void 0!==T?T:0,metricLabel:{rendered:"off"},plotArea:{rendered:"on"},innerRadius:.57,size:"sm",startAngle:180,angleExtent:180,class:"oj-sm-padding-3x-top oj-sm-margin-0x",readonly:!0})]})),(0,t.jsx)("div",{slot:"trailing",style:{width:"50px"}}),(0,t.jsx)("div",{slot:"action",style:{width:"52px"}})]})))})]});var x,_,T},e.refreshLastUpdatedTime=function(e){console.log("wallet-list > refreshLastUpdatedLabelNow"),u.value=e,h()}})),define("dashboard/wallet-manager/wallet-charts",["require","exports","preact/jsx-runtime","ojs/ojarraydataprovider","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojbutton","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletCharts=void 0,e.WalletCharts=function({chartData:e}){const s=new a(e,{keyAttributes:"id"});return(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-sm-margin-7x-start oj-sm-margin-7x-end"},{children:[(0,t.jsx)("oj-chart",{id:"lineAreaChart",type:"lineWithArea",style:"width:50%;",data:s,"animation-on-display":"auto","animation-on-data-change":"auto",orientation:"vertical",stack:"on","hover-behavior":"dim",styleDefaults:{lineType:"centeredStepped",markerDisplayed:"off",lineStyle:"solid"}}),(0,t.jsx)("oj-chart",{id:"pieChart",type:"pie",style:"width:50%;",data:s,"animation-on-display":"auto","animation-on-data-change":"auto","hover-behavior":"dim"})]}))}})),define("dashboard/wallet-manager/wallet-editor",["require","exports","preact/jsx-runtime","preact/hooks","@preact/signals","./wallet-lib","./form-elements","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojbutton","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup","ojs/ojinputnumber","ojs/ojselectcombobox"],(function(require,e,t,a,s,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletEditor=void 0,e.WalletEditor=function({tryCreate:e,tryUpdate:o,clear:r,close:l,showAddWallet:d,refreshAllWalletBalances:c}){console.log("wallet-editor > init");const u=(0,s.signal)(void 0);return(0,a.useEffect)((()=>()=>{console.log("wallet-editor > disposed!!!!!!")}),[]),(0,t.jsx)("div",{children:(0,t.jsx)("div",Object.assign({id:"walletEditor",className:"oj-sm-margin-4x-start oj-sm-padding-3x",hidden:!0},{children:(0,t.jsx)("oj-validation-group",Object.assign({id:"tracker",valid:u.value},{children:(0,t.jsxs)("oj-form-layout",{children:[(0,t.jsx)("oj-input-text",{id:"wn",required:!0,"label-hint":"wallet name (id)",disabled:i.tbnDisabled.value}),(0,t.jsx)("oj-input-text",{id:"wdn","label-hint":"wallet display name",style:{display:i.tdnHidden.value?"none":""}}),(0,t.jsx)("oj-input-password",{id:"wpk",required:!0,"label-hint":"public wallet address","mask-icon":"visible"}),(0,t.jsx)("oj-input-password",{id:"wk",required:!1,value:n.KEY,"label-hint":"key","mask-icon":"visible",style:"display:none",hidden:!0}),(0,t.jsx)("oj-input-number",{id:"wg",onKeyPress:e=>{let t=e.which?e.which:e.keyCode,a=String.fromCharCode(t),s=a.replace(/[^0-9\.]/g,"");a!==s&&e.preventDefault()},labelHint:"Goal (fUSDT)",labelEdge:"inside"}),(0,t.jsx)("oj-color-spectrum",{id:"wcol","label-hint":"wallet color"}),(0,t.jsxs)("oj-combobox-many",Object.assign({id:"wt",class:"oj-form-control-max-width-md",labelEdge:"none",required:!0,placeholder:"keywords to tag this wallet with"},{children:[(0,t.jsx)("oj-option",Object.assign({value:"bot"},{children:"bot"})),(0,t.jsx)("oj-option",Object.assign({value:"fees"},{children:"fees"})),(0,t.jsx)("oj-option",Object.assign({value:"flamingo"},{children:"flamingo"})),(0,t.jsx)("oj-option",Object.assign({value:"personal"},{children:"personal"}))]})),(0,t.jsxs)("div",Object.assign({className:"oj-flex"},{children:[(0,t.jsx)("oj-button",Object.assign({id:"butCreate",onojAction:e,chroming:"callToAction",hidden:i.bcrHidden.value},{children:"Create"})),(0,t.jsx)("oj-button",Object.assign({id:"butUpdate",onojAction:o,chroming:"callToAction",hidden:i.buHidden.value},{children:"Update"})),(0,t.jsx)("oj-button",Object.assign({id:"butClear",onojAction:r,class:"oj-sm-padding-2x-start",hidden:i.bcrHidden.value},{children:"Clear"})),(0,t.jsx)("oj-button",Object.assign({id:"butClose",onojAction:l,class:"oj-sm-padding-2x-start",hidden:i.bcloHidden.value},{children:"Close"}))]}))]})}))}))})}})),define("dashboard/notifications-layer/notifications-layer",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","ojs/ojarraydataprovider","@preact/signals","css!dashboard/notifications-layer/notifications-layer-styles.css","ojs/ojmessages"],(function(require,e,t,a,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.NotificationsLayer=void 0;const i=(0,n.signal)([]);e.NotificationsLayer=(0,a.registerCustomElement)("dashboard-notifications-layer",(function({}){const e=new s(i.value,{keyAttributes:"id"});return(0,t.jsx)("div",{children:(0,t.jsx)("oj-messages",{class:"oj-color-invert",messages:e,display:"notification",position:{my:{vertical:"top",horizontal:"end"},at:{vertical:"top",horizontal:"end"},of:"window"}})})}),"NotificationsLayer"),e.createNotification=function(e){i.value=[e]}})),define("dashboard/flamingo-api/data/tokens",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findTokenByHash=void 0;e.findTokenByHash=function e(t,a,s){for(var n in t){var i=t[n];if("object"==typeof i){var o=e(i,a,i);if(o)return o}if(i===a)return s}},e.default={FLM:{symbol:"FLM",decimals:8,hash:"0xf0151f528127558851b39c2cd8aa47da7418ab28"},FLUND:{symbol:"FLUND",decimals:8,hash:"0xa9603a59e21d29e37ac39cf1b5f5abf5006b22a3"},TIPS:{symbol:"TIPS",decimals:8,hash:"0x340720c7107ef5721e44ed2ea8e314cce5c130fa"},NEO:{symbol:"NEO",decimals:0,hash:"0xef4073a0f2b305a38ec4050e4d3d28bc40ea63f5"},GAS:{symbol:"GAS",decimals:8,hash:"0xd2a4cff31913016155e38e474a2c06d08be276cf"},bNEO:{symbol:"bNEO",decimals:8,hash:"0x48c40d4666f93408be1bef038b6722404d9a4c2a"},FUSD:{symbol:"FUSD",decimals:8,hash:"0x1005d400bcc2a56b7352f09e273be3f9933a5fb1"},LRB:{symbol:"LRB",decimals:8,hash:"0x8c07b4c9f5bc170a3922eac4f5bb7ef17b0acc8b"},USDL:{symbol:"USDL",decimals:8,hash:"0xa8c51aa0c177187aeed3db88bdfa908ccbc9b1a5"},SOM:{symbol:"SOM",decimals:8,hash:"0x2d4c6cf0417209a7eb410160344e224e74f87195"},CANDY:{symbol:"CANDY",decimals:9,hash:"0x88da18a5bca86ec8206d9b4960a7d0c4355a432f"},DOGER:{symbol:"DOGER",decimals:8,hash:"0x322b5a366ca724801a1aa01e669b5f3d7f8c7f6f"},DOGEF:{symbol:"DOGEF",decimals:8,hash:"0xa3291b66f70d4687fc0e41977d8acb0699f235ae"},FDE:{symbol:"FDE",decimals:8,hash:"0x9770f4d78a19d1a6fa94b472bcedffcc06b56c49"},fUSDT:{symbol:"fUSDT",decimals:6,hash:"0xcd48b160c1bbc9d74997b803b9a7ad50a4bef020"},USDT:{symbol:"USDT",decimals:6,hash:"0x68b938cc42b6a2d54fb9040f5facf4290ebb8c5f"},fWETH:{symbol:"fWETH",decimals:18,hash:"0xc14b601252aa5dfa6166cf35fe5ccd2e35f3fdf5"},WETH:{symbol:"WETH",decimals:18,hash:"0xd3a41b53888a733b549f5d4146e7a98d3285fa21"},fWBTC:{symbol:"fWBTC",decimals:8,hash:"0xd6abe115ecb75e1fa0b42f5e85934ce8c1ae2893"},WBTC:{symbol:"WBTC",decimals:8,hash:"0x4548a3bcb3c2b5ce42bf0559b1cf2f1ec97a51d0"},pONT:{symbol:"pONT",decimals:9,hash:"8122bc2212ec971690a044b37a6f52a9349b702b"},pWING:{symbol:"pWING",decimals:9,hash:"0xeeccd60ed722111f8400434dac3ba42c14d8beb1"},GM:{symbol:"GM",decimals:8,hash:"0x9b049f1283515eef1d3f6ac610e1595ed25ca3e9"},fCAKE:{symbol:"fCAKE",decimals:18,hash:"0xe65b462b90516012826f8a9c4c285d8c750e3a77"},SWTH:{symbol:"SWTH",decimals:8,hash:"0x78e1330db47634afdb5ea455302ba2d12b8d549f"},fBNB:{symbol:"fBNB",decimals:18,hash:"0xb56f0fba45cc57a948b342186274dfd863996bb3"}}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/wallet-peek/wallet-peek",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","@preact/signals","dashboard/flamingo-api/api/api-client","dashboard/flamingo-api/data/tokens","ojs/ojarraydataprovider","dashboard/wallet-manager/bignumber","css!dashboard/wallet-peek/wallet-peek-styles.css"],(function(require,e,t,a,s,n,i,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletPeek=e.seletedAddress=void 0;const l=new n.default;e.seletedAddress=(0,s.signal)(void 0),e.WalletPeek=(0,a.registerCustomElement)("dashboard-wallet-peek",(function({hiddenRoot:a,navigateBack:n}){console.log("wallet-peek > render");const d=(0,s.useSignal)(void 0),c=(0,s.useSignal)([]),u=new o(c.value,{keyAttributes:"symbol"});return(0,s.useSignalEffect)((()=>{e.seletedAddress.value&&(console.log("wallet-peek > render > selectedAddress.value changed",e.seletedAddress.value),c.value=[],function(e){return __awaiter(this,void 0,void 0,(function*(){return yield l.getWalletWalletLatest(e)}))}(e.seletedAddress.value).then((e=>{var t,a;console.log("wallet-peek > getWalletDetails",e),d.value=e,c.value=(a=[],(null===(t=d.value)||void 0===t?void 0:t.data)&&Object.keys(d.value.data[0].balances).forEach(((e,t)=>{const s=(0,i.findTokenByHash)(i.default,e,void 0);a.push({key:e,total:d.value.data[0].balances[e],token:s})})),console.log("wallet-peek > getAssetBalances ",a),a)})))})),(0,t.jsxs)("div",Object.assign({hidden:a,class:"oj-sm-margin-2x"},{children:[(0,t.jsx)("oj-button",Object.assign({display:"all",onojAction:n,class:"oj-button-md"},{children:(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-back-parent"})})),(0,t.jsx)("div",{children:e.seletedAddress.value}),(0,t.jsx)("oj-list-view",Object.assign({"aria-label":"wallet balances",data:u,class:"oj-listview-item-padding-off","selection-mode":"none"},{children:(0,t.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>void 0===e.data.token?(0,t.jsx)(t.Fragment,{children:"no tokens..."}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.data.token.symbol}),(0,t.jsx)("div",{children:(0,r.BigNumber)(e.data.total,10).shiftedBy(-e.data.token.decimals).toFixed()})]})})}))]}))}),"WalletPeek",{properties:{hiddenRoot:{type:"boolean"},message:{type:"string"},navigateBack:{type:"function"}}})}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/flamingo-api/indexdb/indexDbService",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const t="neo-flamingo-offline-storage";let a=!1;const s=[];let n;e.default={getObjectStore:function(e){const t=n.transaction(e,"readwrite");return t.oncomplete=function(){},t.objectStore(e)},isOfflineStorageEnabled:function(){return a},bootstrapOfflineStorage:function(e,i){return __awaiter(this,void 0,void 0,(function*(){if(a=e,!a)throw"[Offline Storage] Feature switch not enabled";try{const{openDbHandle:e}=yield new Promise(((e,a)=>{const n=self.indexedDB.open(t,1);let i=!1;n.onsuccess=function(){e({dbUpgradeNeeded:i,openDbHandle:this.result})},n.onerror=function(e){console.error("[Offline Storage] Could not open database",e),a(e)},n.onupgradeneeded=function(){s.forEach((e=>{e(this.result)})),i=!0}}));n=e,yield i()}catch(e){
a=!1;const t="[Offline Storage] Feature was enabled but failed to initialize databases";throw console.error(t,e),t}}))},registerOnUpgradeNeededListener:function(e){s.push(e)}}})),define("dashboard/flamingo-api/indexdb/indexDbErrorHandling",["require","exports"],(function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractErrorAsString=void 0,e.extractErrorAsString=function(e,t){try{return e+`. ${t.target.error}`}catch(t){return e+". Error converting indexdb error event to string"}}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/flamingo-api/indexdb/transactionsDbService",["require","exports","./indexDbService","./indexDbErrorHandling"],(function(require,e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const s="watchlist";let n=2;t.default.registerOnUpgradeNeededListener((e=>function(e){console.log("transactionsDbService > onUpgradeNeeded");let t;e.objectStoreNames.contains(s)||(t=e.createObjectStore(s,{keyPath:"id"}),t.createIndex("idIndex","id",{unique:!0,multiEntry:!1}),t.createIndex("symbolIndex","symbol",{unique:!1,multiEntry:!1}))}(e))),e.default={setGeneratedArtifactVersion:function(e){n=e},storeTransaction:function(e,i,o){return __awaiter(this,void 0,void 0,(function*(){yield function(e,i,o){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((r,l)=>{let d={block_time:e.block_time,id:e.id,size:e.size,txid:e.txid,value:e.value,net_fee:e.net_fee,asset_id:e.asset_id,symbol:e.symbol,from:e.from,to:e.to,type:e.type,purchaseCostUsdt:i,goalUsdt:o,recordVersion:n,createdOn:(new Date).toISOString()};const c=t.default.getObjectStore(s).put(d);d=null,c.onsuccess=function(){r()},c.onerror=function(t){l((0,a.extractErrorAsString)(`addTransactionToDb indexdb error id=${e.id}`,t))}}))}))}(e,i,o)}))},getTransactions:function(e){return __awaiter(this,void 0,void 0,(function*(){return yield function(e){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{const o=t.default.getObjectStore(s).index("symbolIndex").getAll(e);o.onsuccess=function(e){if(void 0===e.target.result)return void i();const t=e.target.result;n(t)},o.onerror=function(e){i((0,a.extractErrorAsString)("getTransactionsFromDb indexdb error",e))}}))}))}(e)}))},getAllTransactions:function(){return __awaiter(this,void 0,void 0,(function*(){return yield function(){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{const i=t.default.getObjectStore(s).getAll();i.onsuccess=function(t){if(void 0===t.target.result)return void n();const a=t.target.result;e(a)},i.onerror=function(e){n((0,a.extractErrorAsString)("getTransactionsFromDb indexdb error",e))}}))}))}()}))},deleteById:function(e){return __awaiter(this,void 0,void 0,(function*(){return new Promise(((a,n)=>{const i=t.default.getObjectStore(s),o=i.index("idIndex").openKeyCursor(e);o.onsuccess=function(){const e=o.result;e?(i.delete(e.primaryKey),e.continue()):a()},o.onerror=function(e){n(e.target.errorCode)}}))}))}}})),define("dashboard/watch-list/watch-list-item",["require","exports","preact/jsx-runtime","dashboard/price-list/price-list","ojs/ojconverter-number","dashboard/notifications-layer/notifications-layer","css!dashboard/watch-list/watch-list-styles.css","ojs/ojgauge"],(function(require,e,t,a,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WatchListItem=void 0;const i=new s.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:2}),o=new s.IntlNumberConverter({style:"decimal",minimumIntegerDigits:2,minimumFractionDigits:2,maximumFractionDigits:4,useGrouping:!1}),r=e=>({insert:`purchased â (${e.componentElement.getAttribute("data-valueSymbol")}) : ${e.componentElement.getAttribute("data-value")}\n      â â â â â â â â  (USDT) : ${e.componentElement.getAttribute("data-purchaseCostUsdt")} \n      currentâ â â  (USDT) : ${e.componentElement.getAttribute("data-curPriceInUsdt")}\n      goalâ â â â â  (USDT) : ${e.componentElement.getAttribute("data-goalUsdt")}`});e.WatchListItem=function(e,s){const l=a.prices.value.find((t=>t.symbol===e.symbol)),d=l?l.usd_price:0,c=parseFloat(e.value)*d,u=e.purchaseCostUsdt,f=e.goalUsdt,m=c-u;return(0,t.jsxs)("li",Object.assign({class:"oj-md-padding-3x-top oj-md-padding-3x-bottom"},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-flex oj-text-primary-color oj-typography-body-md"},{children:[(0,t.jsx)("img",{src:`styles/images/${e.symbol}.svg`,class:" card-small-token"}),(0,t.jsx)("div",Object.assign({onClick:()=>(e=>{navigator.clipboard.writeText(e);const t={id:1,severity:"none",summary:e+" copied to clipboard",autoTimeout:3e3};(0,n.createNotification)(t)})(e.value)},{children:o.format(parseFloat(e.value))})),(0,t.jsx)("div",{class:"oj-flex-item"}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item oj-flex"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",class:"oj-md-padding-2x-start card-small-token"}),(0,t.jsx)("div",{children:i.format(c)}),(0,t.jsx)("div",Object.assign({class:"oj-md-margin-2x-start "+(m>0?m>f-u?"profit-above-goal":"in-profit":"at-a-loss")},{children:i.format(m)}))]}))]})),(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-md-padding-5x-start oj-md-padding-3x-top oj-md-padding-1x-bottom"},{children:[(0,t.jsx)("div",{class:"oj-flex-item"}),(0,t.jsx)("oj-status-meter-gauge",{"labelled-by":"metricLabel",min:Math.max(0,c-100),max:e.goalUsdt+50,value:c,thresholds:[{max:u,color:"red"},{max:f,color:"black"},{color:"green"}],size:"lg",referenceLines:[{value:u,color:"red"},{value:f,color:"black"}],tooltip:{renderer:r},"data-curPriceInUsdt":c,"data-purchaseCostUsdt":u,"data-goalUsdt":f,"data-value":e.value,"data-valueSymbol":e.symbol,style:{width:"250px",top:"10px"},plotArea:{rendered:"on"},readonly:!0}),(0,t.jsx)("oj-button",Object.assign({id:"bDelete",display:"icons",class:"oj-button-sm oj-sm-padding-2x-start",onojAction:s,"data-id":e.id,"data-value":e.value,"data-symbol":e.symbol},{children:(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-trash"})})),(0,t.jsx)("div",{class:"oj-flex-item"})]}))]}))}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/watch-list/watch-list",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","dashboard/flamingo-api/indexdb/transactionsDbService","@preact/signals","ojs/ojarraydataprovider","dashboard/price-list/price-list","./watch-list-item","dashboard/wallet-manager/asset-watchlist","css!dashboard/watch-list/watch-list-styles.css","ojs/ojgauge"],(function(require,e,t,a,s,n,i,o,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WatchList=e.tryLoadTransactionsInWatchlist=void 0;const d=(0,n.signal)([]);function c(){setTimeout((()=>{s.default.getAllTransactions().then((e=>{d.value=e.sort(((e,t)=>e.value-t.value))}))}),1e3)}function u(e){return __awaiter(this,void 0,void 0,(function*(){const t=e.srcElement.dataset.id,a=e.srcElement.dataset.symbol,s=e.srcElement.dataset.value;yield(0,l.deleteWatchListItem)(parseInt(t),a,s),c()}))}e.tryLoadTransactionsInWatchlist=c,e.WatchList=(0,a.registerCustomElement)("dashboard-watch-list",(function(){console.log("watch-list > render");const e=new i(d.value,{keyAttributes:"id"});return(0,n.useSignalEffect)((()=>{o.prices.value&&o.prices.value.length>0&&c()})),(0,t.jsx)("div",{children:(0,t.jsx)("oj-list-view",Object.assign({id:"lvWatchlist","aria-label":"transactions",data:e,gridlines:{item:"hidden"},class:"oj-sm-padding-2x",selectionMode:"none"},{children:(0,t.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>(0,r.WatchListItem)(e.data,u)})}))})}),"WatchList")}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/wallet-manager/asset-watchlist",["require","exports","preact/jsx-runtime","@preact/signals","./wallet-lib","dashboard/flamingo-api/indexdb/transactionsDbService","dashboard/notifications-layer/notifications-layer","dashboard/watch-list/watch-list-item","ojs/ojconverter-number","dashboard/price-list/price-list","./asset-transactions","dashboard/watch-list/watch-list","./wallet-manager","ojs/ojinputnumber"],(function(require,e,t,a,s,n,i,o,r,l,d,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetWatchlistEditor=e.deleteWatchListItem=e.seletedTransaction=void 0,e.seletedTransaction=(0,a.signal)(void 0);e.deleteWatchListItem=(e,t,a)=>__awaiter(void 0,void 0,void 0,(function*(){yield n.default.deleteById(e);const s={id:2,severity:"none",summary:`${t} ${a} deleted from watch list`,autoTimeout:2e3};(0,i.createNotification)(s)})),e.AssetWatchlistEditor=function({hidden:a,navigateBack:f}){var m,g,h,v,p,j,b,w,y,x,_,T,A,N,O,S,E,k;console.log("asset-watchlist > AssetWatchlistEditor");const C=l.prices.value.find((t=>{var a;return t.symbol===(null===(a=e.seletedTransaction.value)||void 0===a?void 0:a.transaction.symbol)})),D=C?C.usd_price:0,L=new r.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12}),W=1===(null===(m=e.seletedTransaction.value)||void 0===m?void 0:m.watchlist.length)?e.seletedTransaction.value.watchlist[0]:void 0;return(0,t.jsxs)("div",Object.assign({hidden:a,class:"oj-sm-margin-2x"},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex"},{children:[(0,t.jsx)("oj-button",Object.assign({display:"all",onojAction:f,class:"oj-button-md"},{children:(0,t.jsx)("span",{slot:"startIcon",class:"oj-ux-ico-back-parent"})})),(0,t.jsx)("h6",Object.assign({class:"oj-sm-margin-4x-start"},{children:1===(null===(g=e.seletedTransaction.value)||void 0===g?void 0:g.watchlist.length)?"Edit existing item in watchlist":"Add to watchlist"}))]})),(0,t.jsx)("div",{children:(null===(h=e.seletedTransaction.value)||void 0===h?void 0:h.txDetail)?null===(v=e.seletedTransaction.value)||void 0===v?void 0:v.txDetail.index:"loading txdetail"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",Object.assign({class:"oj-md-margin-3x-top oj-md-margin-5x-bottom"},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-flex oj-text-primary-color oj-typography-body-md"},{children:[(0,t.jsx)("img",{src:`styles/images/${null===(p=e.seletedTransaction.value)||void 0===p?void 0:p.transaction.symbol}.svg`,class:" card-small-token"}),(0,t.jsx)("div",Object.assign({class:"oj-flex-item"},{children:null===(j=e.seletedTransaction.value)||void 0===j?void 0:j.transaction.value})),(0,t.jsx)("div",{class:"oj-flex-item"}),(null===(b=e.seletedTransaction.value)||void 0===b?void 0:b.transaction.value)>0?(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item oj-flex"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",class:"card-small-token"}),(0,t.jsx)("div",{children:L.format(parseFloat(null===(w=e.seletedTransaction.value)||void 0===w?void 0:w.transaction.value)*D)})]})):(0,t.jsx)(t.Fragment,{})]})),(0,t.jsxs)("div",Object.assign({class:"oj-md-padding-6x-start oj-md-margin-1x-top oj-text-secondary-color oj-typography-body-sm"},{children:["sent"===(null===(y=e.seletedTransaction.value)||void 0===y?void 0:y.transaction.type)?"sent to ":"recieved from ",(0,t.jsxs)("span",Object.assign({class:"clipboard-action tx-address",title:"peek into address"},{children:[(0,t.jsx)("span",{class:"oj-ux-ico-wallet oj-md-margin-1x-end oj-md-margin-1x-top"}),"sent"===(null===(x=e.seletedTransaction.value)||void 0===x?void 0:x.transaction.type)?(0,s.addressFormat)(null===(_=e.seletedTransaction.value)||void 0===_?void 0:_.transaction.to[0]):(0,s.addressFormat)(null===(T=e.seletedTransaction.value)||void 0===T?void 0:T.transaction.from[0])]}))]})),(0,t.jsxs)("div",Object.assign({class:"oj-md-padding-6x-start oj-md-margin-1x-top oj-text-secondary-color oj-typography-body-sm"},{children:[(0,d.getTimeInterval)(1e3*(null===(A=e.seletedTransaction.value)||void 0===A?void 0:A.transaction.block_time)),"(",e.seletedTransaction.value?new Date(1e3*(null===(N=e.seletedTransaction.value)||void 0===N?void 0:N.transaction.block_time)).toISOString():(0,t.jsx)(t.Fragment,{}),")"]}))]})),(0,t.jsxs)("div",Object.assign({class:"oj-md-margin-5x-start"},{children:[(0,t.jsx)("oj-input-number",{id:"tc",labelHint:"Purchase Cost (fUSDT)",labelEdge:"inside",value:W?W.purchaseCostUsdt:null,class:"oj-sm-padding-1x-top"}),(0,t.jsx)("oj-input-number",{id:"tg",labelHint:"Goal (fUSDT)",labelEdge:"inside",value:W?W.goalUsdt:null,class:"oj-sm-padding-1x-top"})]}))]}),(0,t.jsx)("div",Object.assign({class:"oj-md-margin-5x-top oj-md-margin-3x-bottom"},{children:(0,t.jsx)("ul",Object.assign({style:"list-style-type: none;"},{children:1===(null===(O=e.seletedTransaction.value)||void 0===O?void 0:O.watchlist.length)?(0,o.WatchListItem)(e.seletedTransaction.value.watchlist[0],(()=>{})):(0,t.jsx)(t.Fragment,{})}))})),(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-sm-padding-4x-top"},{children:[(0,t.jsx)("div",{class:"oj-flex-item"}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item"},{children:[(0,t.jsx)("oj-button",Object.assign({id:"butCancel",chroming:"outlined",onojAction:f},{children:"cancel"})),(0,t.jsx)("oj-button",Object.assign({id:"butCreate",chroming:"callToAction",class:"oj-sm-margin-2x-start",onojAction:()=>__awaiter(this,void 0,void 0,(function*(){console.log("asset-transactions > addToWatchList",e.seletedTransaction.value);const t=document.getElementById("tc"),a=document.getElementById("tg");yield n.default.storeTransaction(e.seletedTransaction.value.transaction,t.value,a.value);const s={id:2,severity:"none",summary:`${e.seletedTransaction.value.transaction.symbol} ${e.seletedTransaction.value.transaction.value} added to watch list`,autoTimeout:2e3};(0,i.createNotification)(s),(0,c.tryLoadTransactionsInWatchlist)(),(0,u.refreshCurrentSelectedAssetTransactions)(),f()})),hidden:"edit"===(null===(S=e.seletedTransaction.value)||void 0===S?void 0:S.transactionType)},{children:"create"})),(0,t.jsx)("oj-button",Object.assign({id:"butUpdate",chroming:"callToAction",class:"oj-sm-margin-2x-start",onojAction:()=>__awaiter(this,void 0,void 0,(function*(){const t=document.getElementById("tc"),a=document.getElementById("tg");yield n.default.storeTransaction(e.seletedTransaction.value.transaction,t.value,a.value);const s={id:2,severity:"none",summary:`${e.seletedTransaction.value.transaction.symbol} ${e.seletedTransaction.value.transaction.value} updated in watch list`,autoTimeout:2e3};(0,i.createNotification)(s),(0,c.tryLoadTransactionsInWatchlist)(),(0,u.refreshCurrentSelectedAssetTransactions)(),f()})),hidden:"add"===(null===(E=e.seletedTransaction.value)||void 0===E?void 0:E.transactionType)},{children:"update"})),(0,t.jsx)("oj-button",Object.assign({id:"butDelete",chroming:"danger",class:"oj-sm-margin-2x-start",onojAction:()=>__awaiter(this,void 0,void 0,(function*(){yield(0,e.deleteWatchListItem)(e.seletedTransaction.value.transaction.id,e.seletedTransaction.value.transaction.symbol,e.seletedTransaction.value.transaction.value),(0,c.tryLoadTransactionsInWatchlist)(),(0,u.refreshCurrentSelectedAssetTransactions)(),f()})),hidden:"add"===(null===(k=e.seletedTransaction.value)||void 0===k?void 0:k.transactionType)},{children:"delete"}))]}))]}))]}))}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/wallet-manager/asset-transactions",["require","exports","preact/jsx-runtime","ojs/ojconverter-number","ojs/ojcolor","./wallet-lib","ojs/ojarraydataprovider","dashboard/notifications-layer/notifications-layer","dashboard/price-list/price-list","./asset-manager","dashboard/wallet-peek/wallet-peek","./wallet-manager","ojs/ojcolor","./asset-watchlist","dashboard/flamingo-api/api/api-client","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojbutton","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup"],(function(require,e,t,a,s,n,i,o,r,l,d,c,u,f,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getTimeInterval=e.AssetTransactions=void 0;const g=new m.default;function h(e){let t=Math.floor((Date.now()-e)/1e3),a="second",s="ago";t<0&&(t=-t,s="from now");let n=t;return t>=31536e3?(n=Math.floor(t/31536e3),a="year"):t>=86400?(n=Math.floor(t/86400),a="day"):t>=3600?(n=Math.floor(t/3600),a="hour"):t>=60&&(n=Math.floor(t/60),a="minute"),1!=n&&(a+="s"),n+" "+a+" "+s}e.AssetTransactions=function({hidden:e,transactions:m}){if(void 0===m)return(0,t.jsx)(t.Fragment,{children:"none found ..."});console.log("asset-transactions > render",m);const v=(0,c.getWallet)(m.walletAddress),p=new i(m.transactions,{keyAttributes:"id"}),j=new a.IntlNumberConverter({style:"currency",currency:"USD",currencyDisplay:"symbol",currencyFormat:"standard",decimalFormat:"long",maximumFractionDigits:12}),b=r.prices.value.find((e=>e.symbol===m.asset_name)),w=b?b.usd_price:0,y=e=>{navigator.clipboard.writeText(e);const t={id:1,severity:"none",summary:e+" copied to clipboard",autoTimeout:3e3};(0,o.createNotification)(t)},x=e=>__awaiter(this,void 0,void 0,(function*(){(0,l.showAssetManagerRoute)({assetWatchlistEditorHidden:!1});let t=yield g.getNeoTransaction(e.txid);console.log("aeest-transactions > showAddAssetToWatchList",t),f.seletedTransaction.value={txDetail:t,transaction:e,transactionType:"add",watchlist:[]}})),_=e=>__awaiter(this,void 0,void 0,(function*(){var t;(0,l.showAssetManagerRoute)({assetWatchlistEditorHidden:!1});let a=yield g.getNeoTransaction(e.txid);f.seletedTransaction.value={txDetail:a,transaction:e,transactionType:"edit",watchlist:null===(t=m.watchlist)||void 0===t?void 0:t.filter((t=>t.id===e.id))}}));return(0,t.jsxs)("div",Object.assign({hidden:e},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-sm-padding-5x-start oj-sm-padding-5x-end oj-sm-padding-2x-top"},{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-flex-item"},{children:[(0,t.jsx)("div",{style:{width:"5px",height:"27px",backgroundColor:(v.walletColor?new u(v.walletColor):s.BLACK).toString()}}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-padding-1x-top oj-sm-padding-1x-start oj-sm-padding-2x-end"},{children:[v.name," > "]})),(0,t.jsx)("img",{src:`styles/images/${m.asset_name}.svg`,class:"card-small-token"}),(0,t.jsx)("div",Object.assign({class:"oj-sm-padding-1x-top oj-sm-padding-0x-start oj-sm-padding-2x-end"},{children:m.asset_name}))]})),(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item "},{children:[m.transactions.length," ",m.transactions.length>1?"transactions":1===m.transactions.length?"transaction":""]}))]})),(0,t.jsx)("div",{children:(0,t.jsx)("oj-list-view",Object.assign({id:"lvTransactions","aria-label":"transactions",data:p,gridlines:{item:"visible"},class:"oj-sm-padding-1x",selectionMode:"none"},{children:(0,t.jsx)("template",{slot:"itemTemplate","data-oj-as":"item",render:e=>{var a,s;return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-flex oj-text-primary-color oj-typography-body-md"},{children:[(0,t.jsx)("img",{src:`styles/images/${e.data.symbol}.svg`,class:" card-small-token"}),(0,t.jsxs)("div",Object.assign({class:"oj-flex-item",style:{width:"200px"}},{children:[e.data.value,(0,t.jsx)("span",{class:"oj-md-padding-2x-start oj-ux-ico-clipboard-add clipboard-action",title:"copy price to clipboard",onClick:()=>y(e.data.value)})]})),e.data.value>0?(0,t.jsxs)("div",Object.assign({class:"oj-flex-item oj-flex"},{children:[(0,t.jsx)("img",{src:"styles/images/fUSDT.svg",class:"card-small-token"}),(0,t.jsx)("div",{children:j.format(parseFloat(e.data.value)*w)})]})):(0,t.jsx)(t.Fragment,{}),(0,t.jsxs)("div",Object.assign({class:"oj-sm-flex-initial oj-flex-item oj-flex oj-text-secondary-color"},{children:[(0,t.jsx)("span",{class:"oj-ux-ico-bookmark clipboard-action",title:"add to watch list",hidden:"sent"===e.data.type||(null===(a=m.watchlist)||void 0===a?void 0:a.filter((t=>t.id===e.data.id)).length)>0,onClick:()=>x(e.data)}),(0,t.jsx)("span",{class:"oj-ux-ico-bookmark-selected clipboard-action",title:"remove from watch list",hidden:1!==(null===(s=m.watchlist)||void 0===s?void 0:s.filter((t=>t.id===e.data.id)).length),onClick:()=>_(e.data)})]}))]})),(0,t.jsxs)("div",Object.assign({class:"oj-md-padding-6x-start oj-md-margin-1x-top oj-text-secondary-color oj-typography-body-sm"},{children:["sent"===e.data.type?"sent to ":"recieved from ",(0,t.jsxs)("span",Object.assign({class:"clipboard-action tx-address",title:"peek into address",onClick:()=>{return t="sent"===e.data.type?e.data.to[0]:e.data.from[0],(0,l.showAssetManagerRoute)({walletPeekHidden:!1}),void(d.seletedAddress.value=t);var t}},{children:[(0,t.jsx)("span",{class:"oj-ux-ico-wallet oj-md-margin-1x-end oj-md-margin-1x-top"}),"sent"===e.data.type?(0,n.addressFormat)(e.data.to[0]):(0,n.addressFormat)(e.data.from[0])]})),(0,t.jsx)("span",{class:"oj-md-padding-2x-start oj-sm-padding-2x-top  oj-ux-ico-clipboard-add clipboard-action",title:"copy address to clipboard",onClick:()=>y("sent"===e.data.type?e.data.to[0]:e.data.from[0])})]})),(0,t.jsxs)("div",Object.assign({class:"oj-md-padding-6x-start oj-md-margin-1x-top oj-text-secondary-color oj-typography-body-sm"},{children:[h(1e3*e.data.block_time)," (",new Date(1e3*e.data.block_time).toISOString(),")"]}))]})}})}))})]}))},e.getTimeInterval=h})),define("dashboard/wallet-peek/loader",["require","exports","./wallet-peek"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletPeek=void 0,Object.defineProperty(e,"WalletPeek",{enumerable:!0,get:function(){return t.WalletPeek}})})),define("dashboard/wallet-manager/asset-manager",["require","exports","preact/jsx-runtime","./asset-transactions","@preact/signals","./asset-watchlist","dashboard/wallet-peek/loader"],(function(require,e,t,a,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetManager=e.showAssetManagerRoute=void 0;const i={assetTransactionsHidden:!0,walletPeekHidden:!0,assetWatchlistEditorHidden:!0},o=(0,s.signal)({assetTransactionsHidden:!1,walletPeekHidden:!0,assetWatchlistEditorHidden:!0});function r(e){console.log("asset-manager > showAssetManagerRoute",e),o.value=Object.assign(Object.assign({},i),e)}e.showAssetManagerRoute=r,e.AssetManager=function({transactions:e}){function s(){r({assetTransactionsHidden:!1})}return console.log("asset-manager > render"),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.AssetTransactions,{transactions:e,hidden:o.value.assetTransactionsHidden}),(0,t.jsx)("dashboard-wallet-peek",{navigateBack:s,hiddenRoot:o.value.walletPeekHidden}),(0,t.jsx)(n.AssetWatchlistEditor,{navigateBack:s,hidden:o.value.assetWatchlistEditorHidden})]})}}));__awaiter=this&&this.__awaiter||function(e,t,a,s){return new(a||(a=Promise))((function(n,i){function o(e){try{l(s.next(e))}catch(e){i(e)}}function r(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,r)}l((s=s.apply(e,t||[])).next())}))};define("dashboard/wallet-manager/wallet-manager",["require","exports","preact/jsx-runtime","ojs/ojvcomponent","@preact/signals","ojs/ojcolor","./asset-card","./wallet-lib","./wallet-list","./wallet-charts","./wallet-editor","dashboard/price-list/price-list","dashboard/notifications-layer/notifications-layer","ojs/ojcolor","./asset-manager","dashboard/flamingo-api/indexdb/transactionsDbService","./form-elements","css!dashboard/wallet-manager/wallet-manager-styles.css","ojs/ojchart","ojs/ojactioncard","ojs/ojcolorspectrum","ojs/ojlistview","ojs/ojlistitemlayout","ojs/ojinputtext","ojs/ojbutton","ojs/ojformlayout","ojs/ojvalidationgroup","ojs/ojpopup","ojs/ojdrawerpopup"],(function(require,e,t,a,s,n,i,o,r,l,d,c,u,f,m,g,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWallet=e.WalletManager=e.refreshCurrentSelectedAssetTransactions=e.wallets=e.walletsRaw=e.selectedTags=e.tagsAsArray=e.tags=void 0;const v=(0,s.signal)(void 0),p=(0,s.signal)(void 0);new Map;e.tags=(0,s.signal)(new Set),e.tagsAsArray=(0,s.computed)((()=>Array.from(e.tags.value).map((e=>({name:e,value:e})))));let j=(0,o.getSelectedTagsFromStorage)();function b(t,a){const s=(0,o.loadWalletsFromStorage)();console.log(`wallet-manager > updateWallets ${s.length}`),(t||s&&s.length>0)&&(e.walletsRaw.value=s,a&&a())}function w(e=1e3){setTimeout(b,e)}e.selectedTags=(0,s.signal)(j),e.walletsRaw=(0,s.signal)([]),e.wallets=(0,s.computed)((()=>{if(0===e.selectedTags.value.length)return e.walletsRaw.value;let t=e.walletsRaw.value.filter((t=>{var a=!1;return t.tags.forEach((t=>{e.selectedTags.value.includes(t)&&(a=!0)})),a}));return console.log("wallet-manager > wallets > computed"),t})),e.refreshCurrentSelectedAssetTransactions=function(){return __awaiter(this,void 0,void 0,(function*(){if(p.value.assetId){(0,c.stopPriceRefreshTimer)(),v.value={transactions:[],watchlist:[],asset_name:p.value.asset_name,assetId:p.value.assetId,walletAddress:p.value.walletAddress};var e=yield(0,o.getN3AssetTxs)(p.value.walletAddress,p.value.assetId),t=yield g.default.getTransactions(p.value.asset_name);v.value={transactions:e,watchlist:t,asset_name:p.value.asset_name,assetId:p.value.assetId,walletAddress:p.value.walletAddress}}}))},e.WalletManager=(0,a.registerCustomElement)("dashboard-wallet-manager",(function(){const a=(0,s.useSignal)(new Map),j=(0,s.useSignal)([]),y=(0,s.useSignal)([]),x=(0,s.useSignal)([]),_=(0,s.useSignal)([]),T=(0,s.useSignal)([]),A=(0,s.useSignal)([]),N=(0,s.useSignal)([]),O=(0,s.useSignal)([]),S=(0,s.useSignal)([]),E=(0,s.useSignal)([]),k=(0,s.useSignal)([]),C=(0,s.useSignal)([]),D=(0,s.useSignal)([]);function L(){const e=document.getElementById("lvWallets"),t=document.getElementById("wcol"),a=document.getElementById("wg");return{wcol:t,wn:document.getElementById("wn"),wdn:document.getElementById("wdn"),wpk:document.getElementById("wpk"),wk:document.getElementById("wk"),tracker:document.getElementById("tracker"),lvw:e,we:document.getElementById("walletEditor"),wg:a,wt:document.getElementById("wt"),de:document.getElementById("de"),dat:document.getElementById("dat")}}function W(){const e=L();e.wn.value="",e.wdn.value="",e.wpk.value="",e.wk.value=o.KEY,h.bcrHidden.value=!1,h.bclrHidden.value=!1,h.buHidden.value=!0,h.bcloHidden.value=!1,e.wcol.value=n.BLACK,e.wg.value=0,e.wt.value=[]}function F(){const e=L();W(),e.we.hidden=!0,h.bawHidden.value=!1,e.de.opened=!1,(0,c.startPriceRefreshTimer)()}function P(){const e=L();return"valid"===e.tracker.valid||(e.tracker.showMessages(),e.tracker.focusOn("@firstInvalidShown"),!1)}function I(e,t,a,s){return __awaiter(this,void 0,void 0,(function*(){if(a){p.value={walletAddress:e,asset_name:t,assetId:a};L().dat.opened=!0,(0,c.stopPriceRefreshTimer)(),v.value={transactions:[],watchlist:[],asset_name:t,assetId:a,walletAddress:e};var s=yield(0,o.getN3AssetTxs)(e,a),n=yield g.default.getTransactions(t);v.value={transactions:s,watchlist:n,asset_name:t,assetId:a,walletAddress:e},console.log("wallet-manager > assetSelected",n,v.value)}}))}function U(){return __awaiter(this,void 0,void 0,(function*(){y.value=[],x.value=[],_.value=[],T.value=[],A.value=[],N.value=[],O.value=[],E.value=[],S.value=[],k.value=[],C.value=[],D.value=[],a.value.clear(),j.value=[],console.log("wallet-manager > refreshAllWalletBalances",e.wallets);for(let t=0;t<e.wallets.value.length;t++){const s=e.wallets.value[t],n=s.publicKey?s.publicKey:s.accounts[0].label;let i;false,void 0===i&&(i=yield(0,o.getN3AddressBalances)(n));let r=0;i.forEach((e=>{var t,a,i,o,l,d,u,f,m,g,h,v;if(c.prices.value&&e.balance&&"0"!==e.balance){let p=c.prices.value.find((t=>t.symbol===e.symbol));switch(e.symbol){case"USDT":x.value=[...x.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(t=s.displayName)&&void 0!==t?t:s.name,walletColor:s.walletColor})];break;case"fUSDT":y.value=[...y.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(a=s.displayName)&&void 0!==a?a:s.name,walletColor:s.walletColor})];break;case"FUSD":_.value=[..._.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(i=s.displayName)&&void 0!==i?i:s.name,walletColor:s.walletColor})];break;case"NEO":T.value=[...T.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(o=s.displayName)&&void 0!==o?o:s.name,walletColor:s.walletColor})],p=c.prices.value.find((e=>"bNEO"===e.symbol));break;case"bNEO":A.value=[...A.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(l=s.displayName)&&void 0!==l?l:s.name,walletColor:s.walletColor})],p=c.prices.value.find((e=>"bNEO"===e.symbol));break;case"GAS":N.value=[...N.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(d=s.displayName)&&void 0!==d?d:s.name,walletColor:s.walletColor})];break;case"FLM":O.value=[...O.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(u=s.displayName)&&void 0!==u?u:s.name,walletColor:s.walletColor})];break;case"fWBTC":S.value=[...S.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(f=s.displayName)&&void 0!==f?f:s.name,walletColor:s.walletColor})];break;case"WBTC":E.value=[...E.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(m=s.displayName)&&void 0!==m?m:s.name,walletColor:s.walletColor})];break;case"fWETH":k.value=[...k.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(g=s.displayName)&&void 0!==g?g:s.name,walletColor:s.walletColor})];break;case"WETH":C.value=[...C.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(h=s.displayName)&&void 0!==h?h:s.name,walletColor:s.walletColor})];break;case"FLUND":D.value=[...D.value,Object.assign(Object.assign({},e),{walletAddress:n,walletName:null!==(v=s.displayName)&&void 0!==v?v:s.name,walletColor:s.walletColor})];break;default:console.log(e.symbol)}const j=p?p.usd_price:0;r+=parseFloat(e.balance)*j}})),a.value.set(s.name,{runningWalletTotalInUsd:r,goal:s.goal});const l=[];function d(e,t){const a=c.prices.value.find((t=>t.symbol===e)),s=a?a.usd_price:0,n=null==t?void 0:t.reduce(((e,t)=>e+(t.balance?parseFloat(t.balance)*s:0)),0);return l.push({id:l.length,seriesId:e,groupId:"0",value:n}),l.push({id:l.length,seriesId:e,groupId:"1",value:n}),null!=n?n:0}d("FUSD",_.value),d("fUSDT",y.value),d("USDT",x.value),d("GAS",N.value),d("bNEO",A.value),d("NEO",T.value),d("FLM",O.value),d("fWBTC",S.value),d("WBTC",E.value),d("fWETH",k.value),d("WETH",C.value),d("FLUND",D.value),j.value=l}!function(){__awaiter(this,void 0,void 0,(function*(){console.log("wallet-manager > refreshAllTags",e.wallets);const t=new Set;for(let a=0;a<e.walletsRaw.value.length;a++)e.walletsRaw.value[a].tags.forEach((e=>t.add(e)));e.tags.value=t}))}()}))}function R(){W();const e=L();e.we.hidden=!1,h.tdnHidden.value=!0,h.bawHidden.value=!0,e.de.opened=!0,h.tbnDisabled.value=!1,(0,c.stopPriceRefreshTimer)()}return(0,s.useSignalEffect)((()=>{
c.prices.value&&c.prices.value.length>0&&(console.log("wallet-manager > useSignalEffect > prices changed"),console.log("wallet-manager > useSignalEffect > wallets changed"),b(!1,(()=>{console.log("wallet-manager > useSignalEffect > updateWallets > callback"),U(),(0,r.refreshLastUpdatedTime)(Date.now());L();h.brbHidden.value=0===e.wallets.value.length})))})),(0,t.jsxs)("div",{children:[(0,t.jsx)("oj-drawer-popup",Object.assign({id:"dat",edge:"end",class:"drawerAssetTransactions",onojBeforeClose:F,onopenedChanged:e=>{!0===e.detail.value&&(0,m.showAssetManagerRoute)({assetTransactionsHidden:!1})}},{children:(0,t.jsx)("div",{children:(0,t.jsx)(m.AssetManager,{transactions:v.value})})})),(0,t.jsx)("oj-drawer-popup",Object.assign({id:"de",edge:"start",class:"drawerEditor",onojBeforeClose:F},{children:(0,t.jsx)(d.WalletEditor,{tryCreate:function(){var e;if(P()){const t=L();t.wn.value&&t.wpk.value&&t.wk.value&&((0,o.addWalletToStorage)(t.wn.value,t.wpk.value,t.wk.value,t.wg.value,null===(e=t.wcol.value)||void 0===e?void 0:e.toString(),t.wt.value),F(),w(1e3),function(e=1e3){setTimeout((()=>{U()}),e)}(2e3),h.brbHidden.value=!1)}},tryUpdate:function(){var e;const t=L();P()&&t.wn.value&&t.wn.value&&((0,o.updateWalletToStorage)(t.wn.value,t.wpk.value,t.wg.value,null===(e=t.wcol.value)||void 0===e?void 0:e.toString(),t.wt.value,t.wdn.value),F(),w())},clear:W,close:F,showAddWallet:R,refreshAllWalletBalances:U})})),(0,t.jsx)(r.WalletList,{wallets:e.wallets.value,walletsMetadata:a.value,walletSelected:function(e){return __awaiter(this,void 0,void 0,(function*(){const t=L();if(null===e.detail.items)return W(),t.we.hidden=!0,void(h.bawHidden.value=!1)}))},tryDeleteWallet:function(e){const t=e.srcElement.attributes["row-data"].value;(0,o.deleteWalletFromStorage)(t);const a={id:1,severity:"none",summary:`wallet "${t}" deleted`,autoTimeout:3e3};(0,u.createNotification)(a),b(!0)},showAddWallet:R,showEditWallet:function(t){var a;const s=t.srcElement.attributes["row-data"].value,i=e.wallets.value.find((e=>e.name===s));if(i){const e=i.accounts[0],t=L();console.log("wallet-manager > showEditWallet",i),t.we.hidden=!1,t.wn.value=i.name,h.tdnHidden.value=!1,t.wdn.value=null!==(a=i.displayName)&&void 0!==a?a:i.name,t.wpk.value=i.publicKey?i.publicKey:e._WIF,t.wg.value=i.goal,t.wcol.value=i.walletColor?new f(i.walletColor):n.BLACK,h.bcrHidden.value=!0,h.bclrHidden.value=!0,h.buHidden.value=!1,h.bcloHidden.value=!1,h.bawHidden.value=!0,t.wt.value=i.tags,t.de.opened=!0,h.tbnDisabled.value=!0,(0,c.stopPriceRefreshTimer)()}},refreshAllWalletBalances:U}),(0,t.jsx)(l.WalletCharts,{chartData:j.value}),(0,t.jsxs)("div",Object.assign({class:"oj-flex oj-sm-margin-7x-start oj-sm-margin-7x-end oj-sm-margin-5x-top"},{children:[(0,t.jsx)(i.AssetCard,{wassetName:"FUSD",wasset:_.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"fUSDT",wasset:y.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"USDT",wasset:x.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"FLM",wasset:O.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"FLUND",wasset:D.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"bNEO",wasset:A.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"NEO",wasset:T.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"GAS",wasset:N.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"fWBTC",wasset:S.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"WBTC",wasset:E.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"fWETH",wasset:k.value,prices:c.prices.value,onCardSelected:I}),(0,t.jsx)(i.AssetCard,{wassetName:"WETH",wasset:C.value,prices:c.prices.value,onCardSelected:I})]}))]})}),"WalletManager"),e.getWallet=function(t){for(let a=0;a<e.wallets.value.length;a++){const s=e.wallets.value[a];if(s.publicKey===t)return s}}})),define("dashboard/wallet-manager/loader",["require","exports","./wallet-manager"],(function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WalletManager=void 0,Object.defineProperty(e,"WalletManager",{enumerable:!0,get:function(){return t.WalletManager}})}));
//# sourceMappingURL=loader.js.map